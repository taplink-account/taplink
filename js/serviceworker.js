var url=new URL(self.location),version=url.searchParams.get("v"),CACHE="webapp-"+version;function preCache(){return caches.open(CACHE).then(function(n){return fetch("/s/webapp.cache").then(function(e){return e.json()}).then(function(e){return n.addAll(e)})})}function checkCache(n){return caches.open(CACHE).then(function(e){return e.match(n).then(function(e){return e||fetch(n)})})}function clearCache(){return caches.keys().then(function(e){return Promise.all(e.filter(function(e){return e!==CACHE}).map(function(e){return caches.delete(e)}))})}self.addEventListener("install",function(e){e.waitUntil(preCache())}),self.addEventListener("activate",function(e){e.waitUntil(clearCache())}),self.addEventListener("fetch",function(e){"GET"===e.request.method&&e.respondWith(checkCache(e.request))});
