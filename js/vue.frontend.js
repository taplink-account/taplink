window.$app.defineComponent("frontend","vue-frontend-actionbar",{data:function(){return{page:"",data:null,isOpenModal:!1}},created:function(){var i=this;this.page=this.$router.currentRoute.name,window.$events.on("beforeNavigate",function(e,t){i.page=null}),window.$events.on("navigate",function(e,t){i.page=i.$router.currentRoute.name,i.data=null}),window.$events.on("setpage",function(e,t){i.data=t})},computed:{isAllow:function(){var e=-1==["product","basket"].indexOf(this.page),t=e&&0<this.$actionbar.info.basket.amount||!e&&null!=this.data;return $mx("body").toggleClass("has-actionbar",t),t},checkoutButtonTitle:function(){return[this.$gettext("Оформить заказ"),this.$gettext("Подтвердить"),this.data.button][this.data.step]}},methods:{addToCart:function(){var i=this,e=this.data.offer_id;if(null!=window.fbq){var s=this.data.price,n=[{id:parseInt(this.data.product_id,16),quantity:1,item_price:s}];_.each(this.data.options,function(e,t){-1!=i.data.options_selected.indexOf(t)&&(s+=e.price),n.push({id:"option:"+t,quantity:1,item_price:e.price})}),fbq("track","AddToCart",{value:s,currency:this.$account.currency.code,content_type:"product",contents:n})}this.data.options_selected.length&&(e+="-"+this.data.options_selected.join("-")),this.$actionbar.addToCart(e,1),this.isOpenModal=!0,this.data.clearForm()},toBasket:function(){this.isOpenModal=!1,this.$router.push({name:"basket"})},marketAction:function(){if(null!=window.fbq)switch(this.data.step){case 0:fbq("track","InitiateCheckout");break;case 2:fbq("track","Lead")}this.data.action()},backToCatalog:function(){-1!=["catalog","collection"].indexOf(this.$history.prevName)?this.$router.go(-1):this.$router.push({name:"catalog"})}},template:'<div> <div class="action-panel-container in" v-if="isAllow"> <div class="action-panel"> <div class="container"> <div v-if="[\'product\', \'basket\', \'checkout\'].indexOf(page) == -1 && $actionbar.info.basket.amount> 0"> <div class="row row-small"> <div class="col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4"> <router-link :to="{name: \'basket\'}" class="button is-medium is-light is-fullwidth"><i class="fai fa-shopping-basket"></i><span class="tag is-danger" v-if="$actionbar.info.basket.amount">{{$actionbar.info.basket.amount}}</span> {{\'Корзина\'|gettext}}</router-link> </div> </div> </div> <div v-if="page == \'product\' && data && !_.isEmpty(data.product)"> <div class="row row-small" v-if="data.product.products_hide_checkout == 0"> <div class="col-xs-2 col-sm-2 col-sm-offset-1 col-md-2 col-md-offset-2"> <a @click.prevent="backToCatalog()" class="button is-medium is-light is-fullwidth has-text-centered product-back-catalog"><i class="fai fa-th"></i></a> </div> <div class="col-xs-8 col-sm-6 col-md-4 col-md-offset-0"> <button type="button" @click="addToCart" class="button is-medium is-primary is-fullwidth" :class="{disabled: !data.product.is_active || !data.offer_id}">{{\'Добавить в корзину\'|gettext}}</button> </div> <div class="col-xs-2 col-sm-2 col-sm-offset-0 col-md-2 col-md-offset-0"> <router-link :to="{name: \'basket\'}" class="button is-medium is-light is-fullwidth"><i class="fai fa-shopping-basket"></i><span class="tag is-danger" v-if="$actionbar.info.basket.amount">{{$actionbar.info.basket.amount}}</span></router-link> </div> </div> <div v-else class="row row-small"> <div class="col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4"> <a @click.prevent="backToCatalog()" class="button is-medium is-light is-fullwidth has-text-centered"><i class="fai fa-th"></i></a> </div> </div> </div> <div v-if="[\'basket\', \'checkout\'].indexOf(page) != -1 && data"> <div class="row row-small"> <div class="col-xs-3 col-sm-5 col-sm-offset-1 col-md-4 col-md-offset-2"> <a @click.prevent="backToCatalog()" class="button is-medium is-light is-fullwidth has-text-centered"><i class="fai fa-th"></i><span class="is-hidden-mobile has-ml-1"> {{\'Вернуться в каталог\'|gettext}}</span></a> </div> <div class="col-xs-9 col-sm-5 col-md-4 col-md-offset-0"> <button type="button" class="button is-medium is-success is-fullwidth" :class="{\'is-loading\': data.isFetching}" :disabled="!data.isAllowAction" @click="marketAction">{{checkoutButtonTitle}}</button> </div> </div> </div> </div> </div> </div> <mx-modal :active.sync="isOpenModal" :has-modal-card="true" :can-cancel="[\'outside\']" class="modal-bottom"> <div class="modal-card modal-card-little" style="justify-content: flex-end;padding: 0"> <section class="modal-card-body"> <div class="media"> <div class="media-left" style="align-self: center"> <div class="sa-icon sa-success animate" style="display: block;"> <span class="sa-line sa-tip animateSuccessTip"></span> <span class="sa-line sa-long animateSuccessLong"></span> <div class="sa-placeholder"></div> <div class="sa-fix"></div> </div> </div> <div class="media-content has-text-black" style="align-self: center"> <h2>{{\'Товар добавлен в корзину\'|gettext}}</h2> </div> </div> <button class="button is-medium is-fullwidth is-primary has-mb-2" @click="toBasket">{{\'Перейти в корзину\'|gettext}}</button> <button class="button is-medium is-fullwidth is-light has-mb-2" @click="isOpenModal = false">{{\'Продолжить покупки\'|gettext}}</button> </section> </div> </mx-modal> </div>'}),window.$app.defineComponent("frontend","vue-frontend-addons-cookiepolicy-banner",{data:function(){return{cookieAgree:!1,isOpenPolicy:!1,isLoading:!1,policy:""}},props:["value"],created:function(){this.cookieAgree=!!Storage.get("cookie_privacy."+this.$account.profile_id,0)},methods:{agreeCookie:function(){Storage.set("cookie_privacy."+this.$account.profile_id,1,86400),this.cookieAgree=!0},click:function(e){var t=this;e.target&&"A"==e.target.tagName.toUpperCase()&&(this.isOpenPolicy=!0,this.policy||this.$api.get("addon/resolve",{params:{addon:"cookiepolicy",request:"body"}}).then(function(e){t.policy=e.response.body,t.isLoading=!1}))}},template:'<div> <div class="footer-banner cookie-banner" :class="{\'is-closed\': cookieAgree}" @click.prevent="click"> <div class="container has-mb-2 has-mt-2"> <div v-html="value.message"></div> <button class="button is-dark is-hidden-touch" @click="agreeCookie">{{\'Я понял\'|gettext}}</button> <button class="modal-close is-large is-hidden-desktop" @click="agreeCookie"></button> </div> </div> <mx-modal :active.sync="isOpenPolicy" :has-modal-card="true"> <div class="modal-card has-text-black" style="font-size: 1rem"> <header class="modal-card-head"><p class="modal-card-title">{{value.title|gettext}}</p> <button type="button" class="modal-close is-large" @click="isOpenPolicy = false"></button></header> <section class="modal-card-body"> <div class="border col-xs-12" v-if="isLoading"><div class="loading-overlay loading-block is-active"><div class="loading-icon"></div></div></div> <div v-html="policy"></div> </section> <div class="modal-card-foot"> <button type="button" class="button is-dark" @click="isOpenPolicy = false">{{\'Закрыть\'|gettext}}</button> </div> </div> </mx-modal> </div>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-avatar",{data:function(){return{}},props:{to:{type:Object,default:{name:"index"}},index:{type:Number,default:0}},computed:{style:function(){return 0==this.index?"":"visibility:hidden"},backLink:function(){return this.$history.stackBack.length<2?"":this.$history.stackBack[this.$history.stackBack.length-2].path}},template:'<div> <div class="block-item block-avatar block-avatar-history"> <div> <router-link class="fai fa-chevron-left avatar-history is-left has-p-2" style="padding-left:0 !important" :to="backLink" :class="{\'is-hide\': $history.stackBack.length < 2}" :style="style"></router-link> </div> <router-link :to="to"> <div class="has-text-centered"><img :src="\'//{1}/a/{2}\'|format($account.storage_domain, $account.avatar_url)" :class="\'profile-avatar profile-avatar-{1}\'|format($account.avatar_size)" :alt="$account.nickname"></div> </router-link> <div> <i class="fai fa-chevron-right avatar-history has-p-2" style="padding-right:0 !important;visibility:hidden" @click="$router.go(1)"></i> </div> </div> <div class="has-text-centered text-avatar" v-if="!$account.is_avatar_hide_text && account.has_nickname">@{{account.nickname}}</div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-banner",{data:function(){return{}},props:["options","block"],computed:{style:function(){return"padding-top: "+(this.options.p?this.options.p.height/this.options.p.width*100:50)+"%"+(this.options.p?";background: url(//"+this.$account.storage_domain+"/p/"+this.options.p.filename+") 0 0 / 100% no-repeat":"")},bannerInnerStyle:function(){var e=this.options;return e.p?"width:"+(e.is_scale&&e.width?e.width:e.p.width)+"px":""}},methods:{isExternal:function(e){return-1!=["link","phone","sms","email",""].indexOf(e.type)},link:function(e){switch(e.type){case"sms":return"sms:+"+e.sms.toString().replace(/[^0-9]/,"")+(null!=e.sms_text&&e.sms_text.trim().length?"?&body="+encodeURIComponent(e.sms_text):"");case"phone":return"tel:+"+e.phone.toString().replace(/[^0-9]/,"");case"email":return"mailto:"+e.email+(null!=e.email_subject&&e.email_subject.trim().length?"?subject="+encodeURIComponent(e.email_subject):"");case"page":return this.$account.page_id==e.link_page_id?{name:"index"}:{name:"page",params:{page_id:parseInt(e.link_page_id).toString(16)}};case"market":return{name:"catalog"};case"collection":return{name:"collection",params:{collection_id:parseInt(e.collection).toString(16)}};case"product":return{name:"product",params:{product_id:parseInt(e.product).toString(16)}};case"link":return this.$links.process(e.link);default:return e.link}},click:function(e){window.$events.fire("tap",{stat:this.block.block_id+"."+this.block.stat,addons:null!=this.options.data&&null!=this.options.data.link?this.options.data.link:null}),this.isExternal(e.link)&&(document.location=this.link(e.link))}},template:'<div> <div class="block-item" v-if="options.is_link"> <a v-if="isExternal(options.link)" rel="noopener" target="_top" :href=\'link(options.link)\' @click.prevent="click(options)"><div class="block-banner-inner" :style="bannerInnerStyle"><div class="picture-container" :class="{\'picture-container-empty\': !options.p}" :style="style"></div></div></a> <router-link v-else rel="noopener" :to=\'link(options.link)\' @click.native="click(options)"><div class="block-banner-inner" :style="bannerInnerStyle"><div class="picture-container" :class="{\'picture-container-empty\': !options.p}" :style="style"></div></div></router-link> </div> <div class="block-item" v-else> <div class="block-banner-inner" :style="bannerInnerStyle"><div class="picture-container" :class="{\'picture-container-empty\': !options.p}" :style="style"></div></div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-break",{props:["options"],template:"<div class='block-break'><div class='block-break-inner' :class=\"{'has-icon': options.icon, 'is-invisible': options.icon < 0, 'is-fullwidth': options.fullwidth, 'has-fading': options.fading}\" :style=\"{'height': options.break_size + 'px'}\"><span><i :class=\"['fa fai', 'fa-'+options.icon]\" v-if=\"options.icon\"></i></span></div>"}),window.$app.defineComponent("frontend","vue-frontend-blocks-collapse",{props:["options","block_id"],created:function(){this.prepareCollapsed()},watch:{options:function(){this.prepareCollapsed()}},methods:{prepareCollapsed:function(){this.$set(this.options,"collapsed",Array(this.options.fields.length).fill(!1))},toggle:function(e){this.$set(this.options.collapsed,e,!this.options.collapsed[e])}},template:'<div class="block-form block-item"> <div ref=\'styles\'></div> <div class="collapse-list"> <div v-for="(f, i) in options.fields" class="collapse-item" :class="{in: options.collapsed[i]}"> <div class="a" @click="toggle(i)" style="cursor: pointer"> <span class="collapse-icon"></span> <span class="collapse-title" v-if="f.title">{{f.title}}</span> <span class="collapse-title" v-else>{{\'Заголовок\'|gettext}}</span> </div> <div class="collapse-text"><div class="collapse-text-inner" v-html="$nl2br(f.text)"></div></div> </div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-form",{data:function(){return{isLoading:!1,isOpenModal:!1}},props:["options","block"],watch:{options:function(){this.rebuildValues()}},mounted:function(){this.rebuildValues()},created:function(){var e=document.location.search,t=e.match(/[\?|\&]form=([0-9]+)/);t&&t[1]==this.block.block_id&&(e=e.replace(/[\?|\&]form=[0-9]+/,""),this.isOpenModal=!0,this.$router.replace(document.location.pathname+e))},methods:{rebuildValues:function(){this.values=[];for(var e=0;e<this.options.fields.length;e++){var t=this.options.fields[e];this.$set(t,"value","checkbox"==t.typename&&t.default?1:t.value?t.value:""),this.$set(t,"valid",!1)}},submit:function(){var t=this,e=this.$refs.elements.getFields();null!=e&&(this.isLoading=!0,this.$api.post("form/push",{params:{fields:e,block_id:this.block.block_id}}).then(function(e){"success"==e.result&&(window.$events.fire("lead"),"https://www.messenger.com/closeWindow/"==e.response.redirect?window.location=e.response.redirect:window.top.location=e.response.redirect),t.isLoading=!1}))}},template:'<form @submit.prevent="submit" ref="form"> <mx-modal :active.sync="isOpenModal" :has-modal-card="true"> <div class="modal-card modal-card-little"> <section class="modal-card-body has-text-black"> <div class="has-text-centered"> <div class="has-mb-2"> <div class="sa-icon sa-success animate" style="display: block;"> <span class="sa-line sa-tip animateSuccessTip"></span> <span class="sa-line sa-long animateSuccessLong"></span> <div class="sa-placeholder"></div> <div class="sa-fix"></div> </div> </div> <h4 v-html="$nl2br($escape(options.form_text))"></h4> </div> </section> <div class="modal-card-foot" style="justify-content: center"> <button type="button" class="button is-dark" @click="isOpenModal = false">{{\'Закрыть\'|gettext}}</button> </div> </div> </mx-modal> <vue-frontend-form-elements :fields="options.fields" :options="options" :isLoading.sync="isLoading" ref="elements" :block_id="block.block_id"></vue-frontend-form-elements> </form>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-html",{mounted:function(){this.refresh()},watch:{options:function(){this.refresh()}},props:["options"],methods:{refresh:function(){var t=this;this.$nextTick(function(){t.$el.innerHTML="";var e=t.options.html;postscribe(t.$el,e,{done:function(){document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!1}))}})})}},template:"<div></div>"}),window.$app.defineComponent("frontend","vue-frontend-blocks-link",{data:function(){return{loading:""}},props:["options","block"],computed:{stylesheets:function(){return this.options.design&&this.options.design.on?"background:"+this.options.design.bg+";border-color:"+this.options.design.bg+";color:"+this.options.design.text:""},title:function(){return this.options.title?this.options.title:this.options.link},isExternal:function(){return-1!=["link","phone","email","sms"].indexOf(this.options.type)},isAnchor:function(){return"link"==this.options.type&&"#"==this.link.substr(0,1)},link:function(){switch(this.options.type){case"link":return this.$links.process(this.options.link);case"sms":return"sms:+"+this.options.sms.toString().replace(/[^0-9]/,"")+(null!=this.options.sms_text&&this.options.sms_text.trim().length?"?&body="+encodeURIComponent(this.options.sms_text):"");case"phone":return"tel:+"+this.options.phone.toString().replace(/[^0-9]/,"");case"email":return"mailto:"+this.options.email+(null!=this.options.email_subject&&this.options.email_subject.trim().length?"?subject="+encodeURIComponent(this.options.email_subject):"");case"page":return this.$account.page_id==this.options.link_page_id?{name:"index"}:{name:"page",params:{page_id:parseInt(this.options.link_page_id).toString(16)}};case"market":return{name:"catalog"};case"collection":return{name:"collection",params:{collection_id:parseInt(this.options.collection).toString(16)}};case"product":return{name:"product",params:{product_id:parseInt(this.options.product).toString(16)}};default:return""}}},methods:{click:function(e){var t=this;this.loading=this.block.stat,window.$events.fire("tap",{stat:this.block.block_id+"."+this.block.stat,addons:null!=this.options.data&&null!=this.options.data.link?this.options.data.link:null}),this.isExternal||e.preventDefault(),setTimeout(function(){t.loading=""},2e3)}},template:'<a v-if="isAnchor" :href=\'link\' class="button btn-link btn-link-styled" :class="{\'is-loading\': loading== block.stat}" :style="stylesheets">{{title}}<div v-if="options.subtitle" class="btn-link-subtitle">{{options.subtitle}}</div></a> <a v-else-if="isExternal" rel="noopener" :href=\'link\' target="_top" class="button btn-link btn-link-styled" :class="{\'is-loading\': loading== block.stat}" @click="click" :style="stylesheets">{{title}}<div v-if="options.subtitle" class="btn-link-subtitle">{{options.subtitle}}</div></a> <router-link v-else rel="noopener" :to=\'link\' class="button btn-link btn-link-styled" :class="{\'is-loading\': loading== block.stat}" @click.native="click" :style="stylesheets">{{title}}<div v-if="options.subtitle" class="btn-link-subtitle">{{options.subtitle}}</div></router-link>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-map",{data:function(){return{loading:null}},props:["options","block"],mounted:function(){this.rebuild()},watch:{options:function(){this.rebuild()}},computed:{styleSheets:function(){return this.options.design&&this.options.design.on?"background:"+this.options.design.bg+";border-color:"+this.options.design.bg+";color:"+this.options.design.text:""}},methods:{click:function(e,t){var i=this;this.loading=t,window.$events.fire("tap",{stat:this.block.block_id+"."+this.block.stat[t]}),window.top.location=this.link(e),setTimeout(function(){i.loading=null},2e3)},rebuild:function(){var l=this;$mx.lazy("map.js","map.css",function(){var e=l.options.bounds,t=l.options.markers,i=l.options.is_fixed,s=L.map(l.$refs.map,{dragging:!i,doubleClickZoom:!i,boxZoom:!i,touchZoom:!i,scrollWheelZoom:!i,zoomControl:!0,attributionControl:!1}).setView([e.center.lat,e.center.lng],e.zoom);e.bounds&&s.fitBounds(e.bounds),L.control.attribution({prefix:""}).addTo(s),L.tileLayer("/maps/{z}/{x}/{y}.png",{attribution:'<a href="https://taplink.cc" target="_blank">Taplink</a> <span style="color:#ccc">|</span> <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>',crossOrigin:!0}).addTo(s);for(var n=L.icon({iconUrl:"/s/i/marker.png",iconSize:[28,37],popupAnchor:[0,-10],shadowUrl:"/s/i/marker-shadow.png",shadowSize:[40,50],shadowAnchor:[12,31]}),a=(s.getBounds(),0);a<t.length;a++){var o=t[a];L.marker([o.lat,o.lng],{icon:n}).addTo(s).bindPopup("<b>"+o.title+"</b>"+(o.text?"<div>"+o.text.toString().replace(/\n/g,"<br>")+"</div>":""))}})},link:function(e){return"https://maps.google.com/?q="+e.lat+","+e.lng+"&z="+this.options.bounds.zoom}},template:'<div class="block-item"> <div class="map-container btn-link-block"> <div class="map-view" ref="map" :class="{\'map-view-with-zoom-control\': options.show_zoom}"></div> </div> <a v-if="options.show_buttons" v-for="(m, i) in options.markers" :href=\'link(m)\' @click.prevent="click(m,i)" target="_top" class="button btn-link btn-link-block btn-map btn-link-styled" :class="{\'is-loading\': loading== i}" :style="styleSheets"> <i class="fa fai fa-map-marker-alt"></i><span>{{m.title|nvl($gettext(\'Заголовок\'))}}</span> </a> </div>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-messenger",{data:function(){return{loading:null}},props:["options","block"],methods:{click:function(e,t){var i=this;if(this.loading=t.n,window.$events.fire("tap",{stat:this.block.block_id+"."+this.block.stat[t.n],addons:null!=this.options.data&&null!=this.options.data[t.n]?this.options.data[t.n]:null}),null!=t.link)return!0;event.preventDefault(),this.$api.get("link/"+this.block.block_id+"."+this.block.hash+"/"+t.n+"/get").then(openDeeplink),setTimeout(function(){i.loading=""},2e3)},link:function(e){return null!=e.link?e.link:"/link/"+this.block.block_id+"."+this.block.hash+"/"+e.n+"/"},classname:function(e){return(this.loading==e.n?"is-loading ":"")+"btn-link-"+this.options.messenger_style+" "+("default"!=this.options.messenger_style?"btn-socials btn-link-"+e.n:"")+(-1!=["default","block"].indexOf(this.options.messenger_style)?" btn-link-styled":"")}},computed:{stylesheet:function(){return"icon"!=this.options.messenger_style&&this.options.design&&this.options.design.on?"background: "+this.options.design.bg+" !important;border-color: "+this.options.design.bg+" !important;color: "+this.options.design.text+" !important":""}},template:'<div class="socials"> <div class="row row-small"> <div :class="{\'col-xs\': (options.messenger_style != \'default\' && options.messenger_style != \'block\'), \'col-xs-12\': (options.messenger_style == \'default\' || options.messenger_style == \'block\')}" v-for="l in options.items"> <a :href=\'link(l)\' @click="click(event, l)" target="_top" :aria-label="l.t" class="button btn-link" :class="classname(l)" :style="stylesheet"> <img :src="\'/s/i/messengers/icons/{1}.svg\'|format(l.n)" v-if="options.messenger_style == \'icon\'"> <i :class="\'fa fab fa-{1}\'|format(l.i)" v-else v-if="options.messenger_style != \'default\' && options.messenger_style != \'icon\'"></i> <span v-if="[\'default\', \'block\'].indexOf(options.messenger_style) != -1">{{l.t}}</span> </a> </div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-pictures",{data:function(){return{hack:!1,loading:"",index:0}},props:["options","block"],computed:{dataInterval:function(){return this.options.carousel_ride&&this.$auth.isAllowTariff("pro")?this.options.carousel_interval:null}},watch:{block:function(){var e=this;this.hack=!0,this.$nextTick(function(){e.hack=!1})}},methods:{stylesteetPicture:function(e,t){return"padding-top: "+{100:100,70:"70.6",50:50,138:"141.4516"}[t.picture_size]+"%"},stylesheetText:function(e,t){var i="";return t.design&&t.design.on&&(t.design.text||t.design.bg)&&(i=(t.design.text?"color:"+t.design.text+" !important;":"")+(t.design.bg?"background:"+t.design.bg+" !important;":"")),i},stylesheetLink:function(e,t){var i="";return t.design&&t.design.on&&(t.design.button_text||t.design.bg)&&(i=(t.design.button_text?"color:"+t.design.button_text+" !important;":"")+(t.design.bg?"background:"+t.design.bg+" !important;":"")),i},urlPicture:function(e){return e.picture?"//"+this.$account.storage_domain+"/p/"+e.picture:null},isExternal:function(e){return-1!=["link","phone","email",""].indexOf(e.type)},link:function(e){switch(e.type){case"page":return this.$account.page_id==e.link_page_id?{name:"index"}:{name:"page",params:{page_id:parseInt(e.link_page_id).toString(16)}};case"market":return{name:"catalog"};case"collection":return{name:"collection",params:{collection_id:parseInt(e.collection).toString(16)}};case"product":return{name:"product",params:{product_id:parseInt(e.product).toString(16)}};case"link":return this.$links.process(e.link);default:return e.link}},click:function(e,t){var i=this;this.loading=this.block.stat[t],window.$events.fire("tap",{stat:this.block.block_id+"."+this.block.stat[t]}),this.isExternal(e.link)&&(document.location=this.link(e.link)),setTimeout(function(){i.loading=""},2e3)}},template:'<div class="block-slider" :class="{\'is-allow-fullwidth\': options.is_desktop_fullwidth}"> <div class="block-slider-inner"> <div ref=\'device\' v-if="!hack" class="slider slider-pictures has-mb-2" :data-interval="dataInterval" :class="{\'slider-has-text\': options.options.text, \'slider-has-link\': options.options.link, \'slider-has-border\': !options.remove_border}"> <div class="slider-inner"> <div class="slider-slide" :class="{active: index== i}" v-for="(f, i) in options.list"> <div class="picture-container" :class="{\'picture-container-empty\': !f.p}" :style="stylesteetPicture(f, options)" :data-picture="urlPicture(f)"></div> <div class="slider-slide-text" :style="stylesheetText(f, options)"> <div class="slider-slide-title" v-if="f.t">{{f.t}}</div> <div class="slider-slide-title" v-else>{{\'Заголовок\'|gettext}}</div> <div class="slider-slide-snippet">{{f.s}}</div> </div> <a v-if="isExternal(f.link)" class="slider-slide-link" :class="{\'is-loading\': loading== block.stat[i]}" :style="stylesheetLink(f, options)" rel="noopener" target="_top" :href=\'link(f.link)\' @click.prevent="click(f, i)">{{f.link.title|nvl($gettext(\'Открыть\'))}}</a> <router-link v-else class="slider-slide-link" :class="{\'is-loading\': loading== block.stat[i]}" :style="stylesheetLink(f, options)" rel="noopener" :to=\'link(f.link)\' @click.native="click(f, i)">{{f.link.title|nvl($gettext(\'Открыть\'))}}</router-link> </div> </div> <div class="slider-nav" :class="{\'is-hidden\': options.list.length == 1}" ref=\'sliders\'> <div v-for="(v, i) in options.list" class="slider-dot" :class="{active: index== i}" @click="index = i"></div> </div> </div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-socialnetworks",{data:function(){return{loading:null}},props:["options","block"],methods:{click:function(e,t){var i=this;if(this.loading=t.n,window.$events.fire("tap",{stat:this.block.block_id+"."+this.block.stat[t.n],addons:null!=this.options.data&&null!=this.options.data[t.n]?this.options.data[t.n]:null}),null!=t.link)return!0;event.preventDefault(),this.$api.get("link/"+this.block.block_id+"."+this.block.hash+"/"+t.n+"/get").then(openDeeplink),setTimeout(function(){i.loading=null},2e3)},link:function(e){return null!=e.link?e.link:"/link/"+this.block.block_id+"."+this.block.hash+"/"+e.n+"/"},classname:function(e){return"is-fullwidth "+("default"!=this.options.socials_style?"btn-socials btn-socials-"+e.n:"")+(this.loading==e.n?" is-loading":"")+(-1!=["default","block"].indexOf(this.options.socials_style)?" btn-link-styled":"")}},computed:{stylesheet:function(){return this.options.design&&this.options.design.on?"background:"+this.options.design.bg+" !important;border-color:"+this.options.design.bg+" !important;color:"+this.options.design.text+" !important":""}},template:'<div class="socials"> <div class="row row-small"> <div :class="{\'col-xs\': (options.socials_style != \'default\' && options.socials_style != \'block\'), \'col-xs-12\': (options.socials_style == \'default\' || options.socials_style == \'block\')}" v-for="l in options.items"> <a :href="link(l)" @click="click(event, l)" target="_top" :aria-label="l.t" class="button btn-flat btn-link" :class="classname(l)" :style="stylesheet"><i v-if="options.socials_style != \'default\'" :class="l.i"></i> <span v-if="options.socials_style != \'compact\'">{{l.t}}</span></a> </div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-text",{data:function(){return{text_sizes:{sm:"1.03",md:"1.26",lg:"1.48",h3:"1.71",h2:"2.2",h1:"3.5"}}},props:["options"],computed:{component:function(){return"h"==this.options.text_size[0]?this.options.text_size:"div"},html:function(){var e=this.options.text.replace(/(\s)([a-zA-Zа-яА-Я0-9\.\-\_\-]+@[0-9A-Za-z][0-9A-Za-zА-Яа-я\-\.]*\.[A-Za-zА-Яа-я]*)/g,'$1<a href="mailto:$2" target="_blank" class="link">$2</a>').replace(/(\s)(http|https|ftp|ftps|tel)\:\/\/([а-яА-Яa-zA-Z0-9\-\.]+\.[а-яА-Яa-zA-Z]{2,})(\/[^\s"']*)?/g,'$1<a href="$2://$3$4" target="_blank" class="link">$2://$3$4</a>');return this.$nl2br(e)},style:function(){var e={h2:1.25,h1:1.15};return{"font-family":this.options.font?globalFontsFallback[this.options.font]:null,"text-align":this.options.text_align+"!important","line-height":null==e[this.options.text_size]?1.4:e[this.options.text_size],"font-size":this.text_sizes[this.options.text_size]+"rem !important",color:this.options.color}}},template:'<component v-bind:is="component" class="block-text" :style=\'style\' v-html="html"></component>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-timer",{props:["options","block_id","page_id"],data:function(){return{countdown:0}},created:function(){var e=this.options;if(2==e.type){var t="timer"+this.page_id+"-"+this.block_id,i=Math.round(new Date/1e3);console.log(t);var s=Cookies.get(t);console.log(s),e.tms=Math.min(e.tms,8639999),s?e.tms=s-i:Cookies.set(t,e.tms+i,{maxAge:i+86400*e.expires,path:e.path?e.path:"/"})}e.tms<0&&(e.tms=0),this.countdown=e.tms},template:'<div class="block-form block-item"> <center><vue-blocks-flipclock-countdown :countdown="countdown"></vue-blocks-flipclock-countdown></center> </div>'}),window.$app.defineComponent("frontend","vue-frontend-blocks-video",{data:function(){return{player:null,isStarted:!1}},props:["options"],computed:{handler:function(){return null!=this.options.handler?this.options.handler:"embeded"},link:function(){return new RegExp("[?|&]static=1","i").test(location.search)?this.options.embeded.replace("autoplay=1",""):this.options.embeded},sources:function(){return[{src:this.options.url,type:this.options.type}]},posterStyle:function(){return this.options.poster?{"background-image":"url("+this.options.poster+")"}:null}},beforeDestroy:function(){this.player&&this.player.dispose()},mounted:function(){var e=VideoHelper.getProvider(this.options,!0);e&&(null!=e.t?(this.options.poster&&(this.options.poster="//"+this.$account.storage_domain+"/p/"+this.options.poster),this.options.is_autoplay&&this.start()):(this.options.embeded=e.embeded(e.match),this.options.handler="embeded"))},methods:{start:function(){var i=this,s=VideoHelper.getProvider(this.options,!0);this.isStarted=!0,this.$nextTick(function(){var e=[];s.s&&e.push(s.s),$mx.lazy("//cdn.jsdelivr.net/combine/npm/video.js@7.1.0/dist/video.min.js,npm/videojs-resolution-switcher@0.4.2/lib/videojs-resolution-switcher.min.js","videoplayer.css",function(){$mx.lazy(e,[],function(){var e=[{src:i.options.url,type:"function"==typeof s.t?s.t(s.match[1]):s.t}],t={poster:i.options.poster,controls:!0,autoplay:!1,plugins:{videoJsResolutionSwitcher:{dynamicLabel:!0}},controlBar:{volumePanel:{inline:!1}},sources:e};null!=s.techOrder&&(t.techOrder=s.techOrder),i.player=videojs(i.$refs.videoPlayer,t),i.player.play()})})})}},template:'<div class="video-container"> <iframe frameborder="0" :src="link" allowfullscreen="1" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" v-if="handler == \'embeded\'"></iframe> <div class="video-container-poster" :style="posterStyle" @click="start" :class="{\'is-started\': isStarted}"v-else> <video ref="videoPlayer" class="video-js vjs-fill" :class="{\'vjs-hidden-control-bar\': this.options.is_autohide}" v-if="isStarted"><div class="video-container-poster-play"></div></video> <div class="video-container-poster-play" v-else></div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-brandlink",{computed:{brandlink:function(){return"https://"+this.$account.domain},title:function(){var e=this.$account.domain;return e[0].toUpperCase()+e.slice(1)}},template:'<aside> <a v-if="!$account.is_hidelink && !$account.lock_message" :href=\'brandlink\' target="_blank" rel="noopener" class="footer-link"> {{\'Сделано на\'|gettext}} <svg version="1.1" width="16px" height="16px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 76 76" xml:space="preserve" style="fill:#000;position:relative;top:3px;margin:0 2px"> <g><path d="M38,0C17,0,0,17,0,38s17,38,38,38s38-17,38-38S59,0,38,0z M38,72C19.2,72,4,56.8,4,38S19.2,4,38,4s34,15.2,34,34S56.8,72,38,72z M57.5,38c0,1.1-0.9,2-2,2h-35c-1.1,0-2-0.9-2-2s0.9-2,2-2h35C56.6,36,57.5,36.9,57.5,38z M57.5,50c0,1.1-0.9,2-2,2h-35c-1.1,0-2-0.9-2-2s0.9-2,2-2h35C56.6,48,57.5,48.9,57.5,50z M57.5,26c0,1.1-0.9,2-2,2h-35c-1.1,0-2-0.9-2-2s0.9-2,2-2h35C56.6,24,57.5,24.9,57.5,26z"/></g> </svg> <span>{{title}}</span> </a> </aside>'}),window.$app.defineComponent("frontend","vue-frontend-components-clockpicker-face",{props:{pickerSize:Number,min:Number,max:Number,double:Boolean,value:Number,faceNumbers:Array,disabledValues:Function},data:function(){return{isDragging:!1,inputValue:this.value,prevAngle:720}},computed:{count:function(){return this.max-this.min+1},countPerRing:function(){return this.double?this.count/2:this.count},radius:function(){return this.pickerSize/2},outerRadius:function(){return this.radius-5-20},innerRadius:function(){return Math.max(.6*this.outerRadius,this.outerRadius-5-40)},degreesPerUnit:function(){return 360/this.countPerRing},degrees:function(){return this.degreesPerUnit*Math.PI/180},handRotateAngle:function(){for(var e=this.prevAngle;e<0;)e+=360;var t=this.calcHandAngle(this.displayedValue),i=this.shortestDistanceDegrees(e,t);return this.prevAngle+i},handScale:function(){return this.calcHandScale(this.displayedValue)},handStyle:function(){return{transform:"rotate("+this.handRotateAngle+"deg) scaleY("+this.handScale+")",transition:".3s cubic-bezier(.25,.8,.50,1)"}},displayedValue:function(){return null==this.inputValue?this.min:this.inputValue}},watch:{value:function(e){e!==this.inputValue&&(this.prevAngle=this.handRotateAngle),this.inputValue=e}},methods:{isDisabled:function(e){return this.disabledValues&&this.disabledValues(e)},euclidean:function(e,t){var i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)},shortestDistanceDegrees:function(e,t){var i=(t-e)%360,s=180-Math.abs(Math.abs(i)-180);return(360+i)%360<180?1*s:-1*s},coordToAngle:function(e,t){var i=2*Math.atan2(t.y-e.y-this.euclidean(e,t),t.x-e.x);return Math.abs(180*i/Math.PI)},getNumberTranslate:function(e){var t=this.getNumberCoords(e);return"translate("+t.x+"px, "+t.y+"px)"},getNumberCoords:function(e){var t=this.isInnerRing(e)?this.innerRadius:this.outerRadius;return{x:Math.round(t*Math.sin((e-this.min)*this.degrees)),y:Math.round(-t*Math.cos((e-this.min)*this.degrees))}},getFaceNumberClasses:function(e){return{active:e.value===this.displayedValue,disabled:this.isDisabled(e.value)}},isInnerRing:function(e){return this.double&&e-this.min>=this.countPerRing},calcHandAngle:function(e){var t=this.degreesPerUnit*(e-this.min);return this.isInnerRing(e)&&(t-=360),t},calcHandScale:function(e){return this.isInnerRing(e)?this.innerRadius/this.outerRadius:1},onMouseDown:function(e){e.preventDefault(),this.isDragging=!0,this.onDragMove(e)},onMouseUp:function(){this.isDragging=!1,this.isDisabled(this.inputValue)||this.$emit("change",this.inputValue)},onDragMove:function(e){if(e.preventDefault(),this.isDragging||"click"===e.type){var t=this.$refs.clock.getBoundingClientRect(),i=t.width,s=t.top,n=t.left,a="touches"in e?e.touches[0]:e,o={x:i/2,y:-i/2},l={x:a.clientX-n,y:s-a.clientY},r=Math.round(this.coordToAngle(o,l)+360)%360,c=this.double&&this.euclidean(o,l)<(this.outerRadius+this.innerRadius)/2-16,d=Math.round(r/this.degreesPerUnit)+this.min+(c?this.countPerRing:0);r>=360-this.degreesPerUnit/2&&(d=c?this.max:this.min),this.update(d)}},update:function(e){this.inputValue===e||this.isDisabled(e)||(this.prevAngle=this.handRotateAngle,this.inputValue=e,this.$emit("input",e))}},template:'<div class="b-clockpicker-face" @mousedown="onMouseDown" @mouseup="onMouseUp" @mousemove="onDragMove" @touchstart="onMouseDown" @touchend="onMouseUp" @touchmove="onDragMove"> <div class="b-clockpicker-face-outer-ring" ref="clock"> <div class="b-clockpicker-face-hand" :style="handStyle"/> <span v-for="(num, index) of faceNumbers" :key="index" class="b-clockpicker-face-number" :class="getFaceNumberClasses(num)" :style="{ transform: getNumberTranslate(num.value) }"> <span>{{ num.label }}</span> </span> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-components-clockpicker",{props:{pickerSize:{type:Number,default:290},hourFormat:{type:String,default:"12",validator:function(e){return"24"===e||"12"===e}},mobileNative:{type:Boolean,default:!0},incrementMinutes:{type:Number,default:5},autoSwitch:{type:Boolean,default:!0},type:{type:String,default:"is-primary"},position:String,editable:Boolean,rounded:Boolean,disabled:Boolean,inline:Boolean,minTime:Date,maxTime:Date,placeholder:String,loading:Boolean,useHtml5Validation:{type:Boolean,default:!0},timeFormatter:{type:Function,default:function(e,t){var i,s,n,a,o,l;return s=t,n=(i=e).getHours(),a=i.getMinutes(),o=i.getSeconds(),l="","12"===s.hourFormat&&(l=" "+(n<12?AM:PM),12<n?n-=12:0===n&&(n=12)),s.pad(n)+":"+s.pad(a)+(s.enableSeconds?":"+s.pad(o):"")+l}}},data:function(){return{isSelectingHour:!0,isDragging:!1,_isClockpicker:!0,dateSelected:this.value,hoursSelected:null,minutesSelected:null,secondsSelected:null,meridienSelected:null}},computed:{computedValue:{get:function(){return this.dateSelected},set:function(e){this.dateSelected=e,this.$emit("input",e)}},hours:function(){for(var e=[],t=this.isHourFormat24?24:12,i=0;i<t;i++){var s=i,n=s;this.isHourFormat24||(n=s=i+1,this.meridienSelected===this.AM?12===s&&(s=0):this.meridienSelected===this.PM&&12!==s&&(s+=12)),e.push({label:this.formatNumber(n),value:s})}return e},minutes:function(){for(var e=[],t=0;t<60;t+=this.incrementMinutes)e.push({label:this.formatNumber(t),value:t});return e},seconds:function(){for(var e=[],t=0;t<60;t+=this.incrementSeconds)e.push({label:this.formatNumber(t),value:t});return e},meridiens:function(){return[AM,PM]},hoursDisplay:function(){if(null==this.hoursSelected)return"--";if(this.isHourFormat24)return this.pad(this.hoursSelected);var e=this.hoursSelected;return this.meridienSelected===this.PM&&(e-=12),0===e&&(e=12),e},minutesDisplay:function(){return null==this.minutesSelected?"--":this.pad(this.minutesSelected)},minFaceValue:function(){return this.isSelectingHour&&!this.isHourFormat24&&this.meridienSelected===this.PM?12:0},maxFaceValue:function(){return this.isSelectingHour?this.isHourFormat24||this.meridienSelected!==this.AM?23:11:59},faceFormatter:function(){return this.isSelectingHour&&!this.isHourFormat24?function(e){return e}:this.formatNumber},faceSize:function(){return this.pickerSize-24},faceDisabledValues:function(){return this.isSelectingHour?this.isHourDisabled:this.isMinuteDisabled},isMobile:function(){return this.mobileNative&&screen.width<768},isHourFormat24:function(){return"24"===this.hourFormat}},methods:{onClockInput:function(e){this.isSelectingHour?(this.hoursSelected=e,this.onHoursChange(e)):(this.minutesSelected=e,this.onMinutesChange(e))},onHoursChange:function(e){!this.minutesSelected&&this.defaultMinutes&&(this.minutesSelected=this.defaultMinutes),!this.secondsSelected&&this.defaultSeconds&&(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(parseInt(e,10),this.minutesSelected,this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onMinutesChange:function(e){!this.secondsSelected&&this.defaultSeconds&&(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(this.hoursSelected,parseInt(e,10),this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onSecondsChange:function(e){this.updateDateSelected(this.hoursSelected,this.minutesSelected,parseInt(e,10),this.meridienSelected)},updateDateSelected:function(e,t,i,s){if(null!=e&&null!=t&&(!this.isHourFormat24&&null!==s||this.isHourFormat24)){var n=null;this.computedValue&&!isNaN(this.computedValue)?n=new Date(this.computedValue):(n=new Date).setMilliseconds(0),n.setHours(e),n.setMinutes(t),n.setSeconds(i),this.computedValue=new Date(n.getTime())}},formatValue:function(e){return e&&!isNaN(e)?this.timeFormatter(e,this):null},onClockChange:function(){this.autoSwitch&&this.isSelectingHour&&(this.isSelectingHour=!this.isSelectingHour)},onMeridienClick:function(e){this.meridienSelected!==e&&(this.meridienSelected=e,this.onMeridienChange(e))},handleOnFocus:function(){this.onFocus(),this.openOnFocus&&this.toggle(!0)},onChangeNativePicker:function(e){var t=e.target.value;if(t){var i=null;this.computedValue&&!isNaN(this.computedValue)?i=new Date(this.computedValue):(i=new Date).setMilliseconds(0);var s=t.split(":");i.setHours(parseInt(s[0],10)),i.setMinutes(parseInt(s[1],10)),i.setSeconds(s[2]?parseInt(s[2],10):0),this.computedValue=new Date(i.getTime())}else this.computedValue=null},formatNumber:function(e,t){return this.isHourFormat24||t?this.pad(e):e},onBlur:function(e){this.isFocused=!1,this.$emit("blur",e),this.checkHtml5Validity()},onFocus:function(e){this.isFocused=!0,this.$emit("focus",e)},pad:function(e){return(e<10?"0":"")+e},checkHtml5Validity:function(){var e=this;if(this.useHtml5Validation&&void 0!==this.$refs[this.$data._elementRef]){var t=this.$el.querySelector(this.$data._elementRef),i=null,s=null,n=!0;return t.checkValidity()||(i="is-danger",s=t.validationMessage,n=!1),this.isValid=n,this.$nextTick(function(){e.parentField&&(e.parentField.type||(e.parentField.newType=i),e.parentField.message||(e.parentField.newMessage=s))}),this.isValid}},formatHHMMSS:function(e){var t=new Date(e);if(!e||isNaN(t))return"";var i=t.getHours(),s=t.getMinutes(),n=t.getSeconds();return this.formatNumber(i)+":"+this.formatNumber(s,!0)+":"+this.formatNumber(n,!0)}},template:'<div class="b-clockpicker control1"> <vue-frontend-components-dropdown v-if="!isMobile || inline" ref="dropdown" :position="position" :disabled="disabled" :inline="inline"> <input v-if="!inline" ref="input" slot="trigger" autocomplete="off" type="text" :value="formatValue(computedValue)" :placeholder="placeholder" :loading="loading" :disabled="disabled" :readonly="!editable" :rounded="rounded" v-bind="$attrs" :use-html5-validation="useHtml5Validation" @click.native.stop="toggle(true)" @keyup.native.enter="toggle(true)" @change.native="onChangeNativePicker" @focus="handleOnFocus" @blur="onBlur() && checkHtml5Validity()"/> <div class="card" :disabled="disabled" custom> <header v-if="inline" class="card-header"> <div class="b-clockpicker-header card-header-title"> <div class="b-clockpicker-time"> <span class="b-clockpicker-btn" :class="{ active: isSelectingHour }" @click="isSelectingHour = true">{{ hoursDisplay }}</span> <span>:</span> <span class="b-clockpicker-btn" :class="{ active: !isSelectingHour }" @click="isSelectingHour = false">{{ minutesDisplay }}</span> </div> <div v-if="!isHourFormat24" class="b-clockpicker-period"> <div class="b-clockpicker-btn" :class="{ active: meridienSelected== AM }" @click="onMeridienClick(AM)">am</div> <div class="b-clockpicker-btn" :class="{ active: meridienSelected== PM }" @click="onMeridienClick(PM)">pm</div> </div> </div> </header> <div class="card-content"> <div class="b-clockpicker-body" :style="{ width: faceSize + \'px\', height: faceSize + \'px\' }"> <div v-if="!inline" class="b-clockpicker-time"> <div class="b-clockpicker-btn" :class="{ active: isSelectingHour }" @click="isSelectingHour = true">Hours</div> <span class="b-clockpicker-btn" :class="{ active: !isSelectingHour }" @click="isSelectingHour = false">Min</span> </div> <div v-if="!isHourFormat24 && !inline" class="b-clockpicker-period"> <div class="b-clockpicker-btn" :class="{ active: meridienSelected== AM }" @click="onMeridienClick(AM)">{{ AM }}</div> <div class="b-clockpicker-btn" :class="{ active: meridienSelected== PM }" @click="onMeridienClick(PM)">{{ PM }}</div> </div> <vue-frontend-components-clockpicker-face :picker-size="faceSize" :min="minFaceValue" :max="maxFaceValue" :face-numbers="isSelectingHour ? hours : minutes" :disabled-values="faceDisabledValues" :double="isSelectingHour && isHourFormat24" :value="isSelectingHour ? hoursSelected : minutesSelected" @input="onClockInput" @change="onClockChange"/> </div> </div> <footer v-if="$slots.default !== undefined && $slots.default.length" class="b-clockpicker-footer card-footer"> <slot/> </footer> </div> </vue-frontend-components-dropdown> <input v-else ref="input" type="time" autocomplete="off" :value="formatHHMMSS(computedValue)" :placeholder="placeholder" :loading="loading" :max="formatHHMMSS(maxTime)" :min="formatHHMMSS(minTime)" :disabled="disabled" :readonly="false" v-bind="$attrs" :use-html5-validation="useHtml5Validation" style="-webkit-appearance: none" @click.stop="toggle(true)" @keyup.enter="toggle(true)" @change="onChangeNativePicker" @focus="handleOnFocus" @blur="onBlur() && checkHtml5Validity()"/> </div>'}),window.$app.defineComponent("frontend","vue-frontend-components-datapicker",{inheritAttrs:!1,props:{value:Date,dayNames:{type:Array,default:function(){return Vue.prototype.$getDaysNames()}},monthNames:{type:Array,default:function(){return Vue.prototype.$getMonthsNames()}},firstDayOfWeek:{type:Number,default:function(){return Vue.prototype.$getFirstDayWeek()}},inline:Boolean,minDate:Date,maxDate:Date,focusedDate:Date,placeholder:String,editable:Boolean,disabled:Boolean,unselectableDates:Array,unselectableDaysOfWeek:{type:Array,default:function(){return[]}},selectableDates:Array,dateFormatter:{type:Function,default:function(e){return date_format(window.i18n.formats.date,Date.parse(e)/1e3|0)}},dateParser:{type:Function,default:function(e){return new Date(Date.parse(e))}},dateCreator:{type:Function,default:function(){return new Date}},mobileNative:{type:Boolean,default:!0},position:String,events:Array,indicators:{type:String,default:"dots"},required:{type:Boolean,default:!1},expanded:Boolean,loading:Boolean,rounded:Boolean,autocomplete:String,maxlength:[Number,String],useHtml5Validation:{type:Boolean,default:!0}},data:function(){var e=this.value||this.focusedDate||this.dateCreator();return{dateSelected:this.value,focusedDateData:{month:e.getMonth(),year:e.getFullYear()},_elementRef:"input",_isDatepicker:!0,isValid:!0,isFocused:!1,newIconPack:"fa"}},computed:{listOfYears:function(){for(var e=this.maxDate?this.maxDate.getFullYear():Math.max(this.dateCreator().getFullYear(),this.focusedDateData.year)+3,t=[],i=this.minDate?this.minDate.getFullYear():1900;i<=e;i++)t.push(i);return t.reverse()},isFirstMonth:function(){return!!this.minDate&&new Date(this.focusedDateData.year,this.focusedDateData.month)<=new Date(this.minDate.getFullYear(),this.minDate.getMonth())},isLastMonth:function(){if(!this.maxDate)return!1;var e=new Date(this.focusedDateData.year,this.focusedDateData.month);return new Date(this.maxDate.getFullYear(),this.maxDate.getMonth())<=e},isMobile:function(){return this.mobileNative&&screen.width<768},parentField:function(){for(var e=this.$parent,t=0;t<3;t++)e&&!e.$data._isField&&(e=e.$parent);return e},statusType:function(){if(this.parentField&&this.parentField.newType){if("string"==typeof this.parentField.newType)return this.parentField.newType;for(var e in this.parentField.newType)if(this.parentField.newType[e])return e}},statusMessage:function(){if(this.parentField)return this.parentField.newMessage}},watch:{dateSelected:function(e){var t=e||this.dateCreator();this.focusedDateData={month:t.getMonth(),year:t.getFullYear()},this.$emit("input",e),this.$refs.dropdown&&(this.$refs.dropdown.isActive=!1)},value:function(e){this.dateSelected=e,this.isValid||this.$refs.input.checkHtml5Validity()},focusedDate:function(e){e&&(this.focusedDateData={month:e.getMonth(),year:e.getFullYear()})},"focusedDateData.month":function(e){this.$emit("change-month",e)},"focusedDateData.year":function(e){this.$emit("change-year",e)}},methods:{updateSelectedDate:function(e){this.dateSelected=e},onChange:function(e){var t=this.dateParser(e);t&&!isNaN(t)?this.dateSelected=t:(this.dateSelected=null,this.$refs.input.newValue=this.dateSelected)},formatValue:function(e){return e&&!isNaN(e)?this.dateFormatter(e):null},decrementMonth:function(){this.disabled||(0<this.focusedDateData.month?this.focusedDateData.month-=1:(this.focusedDateData.month=11,this.focusedDateData.year-=1))},incrementMonth:function(){this.disabled||(this.focusedDateData.month<11?this.focusedDateData.month+=1:(this.focusedDateData.month=0,this.focusedDateData.year+=1))},formatYYYYMMDD:function(e){var t=new Date(e);if(!e||isNaN(t))return"";var i=t.getFullYear(),s=t.getMonth()+1,n=t.getDate();return i+"-"+(s<10?"0":"")+s+"-"+(n<10?"0":"")+n},onChangeNativePicker:function(e){var t=e.target.value;this.dateSelected=t?new Date(t.replace(/-/g,"/")):null},focus:function(){var e=this;void 0!==this.$data._elementRef&&this.$nextTick(function(){return e.$el.querySelector(e.$data._elementRef).focus()})},onBlur:function(e){this.isFocused=!1,this.$emit("blur",e),this.checkHtml5Validity()},onFocus:function(e){this.isFocused=!0,this.$emit("focus",e)},checkHtml5Validity:function(){var e=this;if(this.useHtml5Validation&&void 0!==this.$refs[this.$data._elementRef]){var t=this.$el.querySelector(this.$data._elementRef),i=null,s=null,n=!0;return t.checkValidity()||(i="is-danger",s=t.validationMessage,n=!1),this.isValid=n,this.$nextTick(function(){e.parentField&&(e.parentField.type||(e.parentField.newType=i),e.parentField.message||(e.parentField.newMessage=s))}),this.isValid}}},template:'<div class="has-feedback datepicker-container"> <div class="datepicker" :class="{\'is-expanded\': expanded}"> <vue-frontend-components-dropdown v-if="!isMobile || inline" ref="dropdown" :position="position" :disabled="disabled" :inline="inline"> <input v-if="!inline" ref="input" :required="required" slot="trigger" type="text" autocomplete="off" :value="formatValue(dateSelected)" :placeholder="placeholder" :rounded="rounded" :loading="loading" :disabled="disabled" @keypress.prevent="" @keyup.prevent="" @keydown.prevent="" v-bind="$attrs" @change.native="onChange($event.target.value)" @focus="$emit(\'focus\', $event)" @blur="$emit(\'blur\', $event) && checkHtml5Validity()"/> <vue-frontend-components-dropdown-item :disabled="disabled" custom> <header class="datepicker-header"> <template v-if="$slots.header !== undefined && $slots.header.length"> <slot name="header"/> </template> <div v-else class="pagination field is-centered"> <a v-show="!isFirstMonth && !disabled" class="pagination-previous" role="button" href="#" :disabled="disabled" @click.prevent="decrementMonth" @keydown.enter.prevent="decrementMonth" @keydown.space.prevent="decrementMonth"> <i class="fai fa-angle-left fa-lg"></i> </a> <a v-show="!isLastMonth && !disabled" class="pagination-next" role="button" href="#" :disabled="disabled" @click.prevent="incrementMonth" @keydown.enter.prevent="incrementMonth" @keydown.space.prevent="incrementMonth"> <i class="fai fa-angle-right fa-lg"></i> </a> <div class="pagination-list"> <div class="field has-addons"> <div class="control"> <span class="select"> <select v-model="focusedDateData.month" :disabled="disabled"> <option v-for="(month, index) in monthNames" :value="index" :key="month"> {{ month }} </option> </select> </span> </div> <div class="control"> <span class="select"> <select v-model="focusedDateData.year" :disabled="disabled"> <option v-for="year in listOfYears" :value="year" :key="year"> {{ year }} </option> </select> </span> </div> </div> </div> </div> </header> <div class="datepicker-content"> <vue-frontend-components-datepicker-table v-model="dateSelected" :day-names="dayNames" :month-names="monthNames" :first-day-of-week="firstDayOfWeek" :min-date="minDate" :max-date="maxDate" :focused="focusedDateData" :disabled="disabled" :unselectable-dates="unselectableDates" :unselectable-days-of-week="unselectableDaysOfWeek" :selectable-dates="selectableDates" :events="events" :indicators="indicators" :date-creator="dateCreator" @close="$refs.dropdown.isActive = false"/> </div> <footer v-if="$slots.default !== undefined && $slots.default.length" class="datepicker-footer"> <slot/> </footer> </vue-frontend-components-dropdown-item> </vue-frontend-components-dropdown> <input v-else ref="input" type="date" :required="required" autocomplete="off" :value="formatYYYYMMDD(value)" :placeholder="placeholder" :loading="loading" :max="formatYYYYMMDD(maxDate)" :min="formatYYYYMMDD(minDate)" :disabled="disabled" v-bind="$attrs" @change="onChangeNativePicker" @focus="$emit(\'focus\', $event)" @blur="$emit(\'blur\', $event) && checkHtml5Validity()"/> </div> <a class="form-control-feedback has-text-grey" v-if="value" @click="value = null"><i class="fai fa-times"></i></a> </div>'}),window.$app.defineComponent("frontend","vue-frontend-components-datepicker-table-row",{props:{selectedDate:Date,week:{type:Array,required:!0},month:{type:Number,required:!0},minDate:Date,maxDate:Date,disabled:Boolean,unselectableDates:Array,unselectableDaysOfWeek:Array,selectableDates:Array,events:Array,indicators:String,dateCreator:Function},methods:{selectableDate:function(e){var t=[];if(this.minDate&&t.push(e>=this.minDate),this.maxDate&&t.push(e<=this.maxDate),t.push(e.getMonth()===this.month),this.selectableDates)for(var i=0;i<this.selectableDates.length;i++){var s=this.selectableDates[i];if(e.getDate()===s.getDate()&&e.getFullYear()===s.getFullYear()&&e.getMonth()===s.getMonth())return!0;t.push(!1)}if(this.unselectableDates)for(var n=0;n<this.unselectableDates.length;n++){var a=this.unselectableDates[n];t.push(e.getDate()!==a.getDate()||e.getFullYear()!==a.getFullYear()||e.getMonth()!==a.getMonth())}if(this.unselectableDaysOfWeek)for(var o=0;o<this.unselectableDaysOfWeek.length;o++){var l=this.unselectableDaysOfWeek[o];t.push(e.getDay()!==l)}return t.indexOf(!1)<0},emitChosenDate:function(e){this.disabled||this.selectableDate(e)&&this.$emit("select",e)},eventsDateMatch:function(e){if(!this.events.length)return!1;for(var t=[],i=0;i<this.events.length;i++)this.events[i].date.getDay()===e.getDay()&&t.push(this.events[i]);return!!t.length&&t},classObject:function(e){function t(e,t){return!(!e||!t)&&(e.getDate()===t.getDate()&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth())}return{"is-selected":t(e,this.selectedDate),"is-today":t(e,this.dateCreator()),"is-selectable":this.selectableDate(e)&&!this.disabled,"is-unselectable":!this.selectableDate(e)||this.disabled}}},template:'<div class="datepicker-row"> <template v-for="(day, index) in week"> <a v-if="selectableDate(day) && !disabled" :key="index" :class="[classObject(day), {\'has-event\':eventsDateMatch(day)}, indicators]" class="datepicker-cell" role="button" href="#" :disabled="disabled" @click.prevent="emitChosenDate(day)" @keydown.enter.prevent="emitChosenDate(day)" @keydown.space.prevent="emitChosenDate(day)"> {{ day.getDate() }} <div class="events" v-if="eventsDateMatch(day)"> <div class="event" :class="event.type" v-for="(event, index) in eventsDateMatch(day)" :key="index"/> </div> </a> <div v-else :key="index" :class="classObject(day)" class="datepicker-cell"> {{ day.getDate() }} </div> </template> </div>'}),window.$app.defineComponent("frontend","vue-frontend-components-datepicker-table",{props:{value:Date,dayNames:Array,monthNames:Array,firstDayOfWeek:Number,events:Array,indicators:String,minDate:Date,maxDate:Date,focused:Object,disabled:Boolean,dateCreator:Function,unselectableDates:Array,unselectableDaysOfWeek:Array,selectableDates:Array},computed:{visibleDayNames:function(){for(var e=[],t=this.firstDayOfWeek;e.length<this.dayNames.length;){var i=this.dayNames[t%this.dayNames.length];e.push(i),t++}return e},hasEvents:function(){return this.events&&this.events.length},eventsInThisMonth:function(){if(!this.events)return[];for(var e=[],t=0;t<this.events.length;t++){var i=this.events[t];i.hasOwnProperty("date")||(i={date:i}),i.hasOwnProperty("type")||(i.type="is-primary"),i.date.getMonth()===this.focused.month&&i.date.getFullYear()===this.focused.year&&e.push(i)}return e}},methods:{updateSelectedDate:function(e){this.$emit("input",e)},weekBuilder:function(e,t,i){for(var s=new Date(i,t),n=[],a=new Date(i,t,e).getDay(),o=a>=this.firstDayOfWeek?a-this.firstDayOfWeek:7-this.firstDayOfWeek+a,l=1,r=0;r<o;r++)n.unshift(new Date(s.getFullYear(),s.getMonth(),e-l)),l++;n.push(new Date(i,t,e));for(var c=1;n.length<7;)n.push(new Date(i,t,e+c)),c++;return n},weeksInThisMonth:function(t,e){for(var i=[],s=new Date(e,t+1,0).getDate(),n=1;n<=s+6;){var a=this.weekBuilder(n,t,e),o=!1;a.forEach(function(e){e.getMonth()===t&&(o=!0)}),o&&i.push(a),n+=7}return i},eventsInThisWeek:function(e,t){if(!this.eventsInThisMonth.length)return[];var i=[],s=[];s=this.weeksInThisMonth(this.focused.month,this.focused.year);for(var n=0;n<s[t].length;n++)for(var a=0;a<this.eventsInThisMonth.length;a++){this.eventsInThisMonth[a].date.getTime()===s[t][n].getTime()&&i.push(this.eventsInThisMonth[a])}return i}},template:'<section class="datepicker-table"> <header class="datepicker-header"> <div v-for="(day, index) in visibleDayNames" :key="index" class="datepicker-cell"> {{ day }} </div> </header> <div class="datepicker-body" :class="{\'has-events\':hasEvents}"> <vue-frontend-components-datepicker-table-row v-for="(week, index) in weeksInThisMonth(focused.month, focused.year)" :key="index" :selected-date="value" :week="week" :month="focused.month" :min-date="minDate" :max-date="maxDate" :disabled="disabled" :unselectable-dates="unselectableDates" :unselectable-days-of-week="unselectableDaysOfWeek" :selectable-dates="selectableDates" :events="eventsInThisWeek(week, index)" :indicators="indicators" :date-creator="dateCreator" @select="updateSelectedDate"/> </div> </section>'}),window.$app.defineComponent("frontend","vue-frontend-components-dropdown-item",{props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},separator:Boolean,disabled:Boolean,custom:Boolean,paddingless:Boolean,hasLink:Boolean,ariaRole:{type:String,default:""}},computed:{anchorClasses:function(){return{"is-disabled":this.$parent.disabled||this.disabled,"is-paddingless":this.paddingless,"is-active":null!==this.value&&this.value===this.$parent.selected}},itemClasses:function(){return{"dropdown-item":!this.hasLink,"is-disabled":this.disabled,"is-paddingless":this.paddingless,"is-active":null!==this.value&&this.value===this.$parent.selected,"has-link":this.hasLink}},ariaRoleItem:function(){return"menuitem"===this.ariaRole||"listitem"===this.ariaRole?this.ariaRole:null},isClickable:function(){return!(this.$parent.disabled||this.separator||this.disabled||this.custom)}},methods:{selectItem:function(){this.isClickable&&(this.$parent.selectItem(this.value),this.$emit("click"))}},created:function(){if(!this.$parent.$data._isDropdown)throw this.$destroy(),new Error("You should wrap bDropdownItem on a bDropdown")},template:'<hr v-if="separator" class="dropdown-divider"> <a v-else-if="!custom && !hasLink" class="dropdown-item" :class="anchorClasses" @click="selectItem" :role="ariaRoleItem"> <slot/> </a> <div v-else :class="itemClasses" @click="selectItem" :role="ariaRoleItem"> <slot/> </div>'}),window.$app.defineComponent("frontend","vue-frontend-components-dropdown",{props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},disabled:Boolean,hoverable:Boolean,inline:Boolean,position:{type:String,validator:function(e){return-1<["is-top-right","is-top-left","is-bottom-left"].indexOf(e)}},mobileModal:{type:Boolean,default:!0},ariaRole:{type:String,default:""},animation:{type:String,default:"fade"}},data:function(){return{selected:this.value,isActive:!1,_isDropdown:!0}},computed:{rootClasses:function(){return[this.position,{"is-disabled":this.disabled,"is-hoverable":this.hoverable,"is-inline":this.inline,"is-active":this.isActive||this.inline,"is-mobile-modal":this.isMobileModal}]},isMobileModal:function(){return this.mobileModal&&!this.inline&&!this.hoverable},ariaRoleMenu:function(){return"menu"===this.ariaRole||"list"===this.ariaRole?this.ariaRole:null}},watch:{value:function(e){this.selected=e},isActive:function(e){this.$emit("active-change",e)}},methods:{selectItem:function(e){this.selected!==e&&(this.$emit("change",e),this.selected=e),this.$emit("input",e),this.isActive=!1},isInWhiteList:function(e){if(e===this.$refs.dropdownMenu)return!0;if(e===this.$refs.trigger)return!0;if(void 0!==this.$refs.dropdownMenu){var t=this.$refs.dropdownMenu.querySelectorAll("*"),i=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){if(e===a.value)return!0}}catch(e){s=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}}if(void 0!==this.$refs.trigger){var l=this.$refs.trigger.querySelectorAll("*"),r=!0,c=!1,d=void 0;try{for(var u,p=l[Symbol.iterator]();!(r=(u=p.next()).done);r=!0){if(e===u.value)return!0}}catch(e){c=!0,d=e}finally{try{!r&&p.return&&p.return()}finally{if(c)throw d}}}return!1},clickedOutside:function(e){this.inline||this.isInWhiteList(e.target)||(this.isActive=!1)},toggle:function(){var e=this;this.disabled||this.hoverable||(this.isActive?this.isActive=!this.isActive:this.$nextTick(function(){e.isActive=!e.isActive}))}},created:function(){"undefined"!=typeof window&&document.addEventListener("click",this.clickedOutside)},beforeDestroy:function(){"undefined"!=typeof window&&document.removeEventListener("click",this.clickedOutside)},template:'<div class="dropdown" :class="rootClasses"> <div v-if="!inline" role="button" ref="trigger" class="dropdown-trigger" @click="toggle" aria-haspopup="true"> <slot name="trigger"/> </div> <transition :name="animation"> <div v-if="isMobileModal" v-show="isActive" class="background" :aria-hidden="!isActive"/> </transition> <transition :name="animation"> <div v-show="(!disabled && (isActive || hoverable)) || inline" ref="dropdownMenu" class="dropdown-menu" :aria-hidden="!isActive"> <div class="dropdown-content" :role="ariaRoleMenu"> <slot/> </div> </div> </transition> </div>'}),window.$app.defineComponent("frontend","vue-frontend-form-elements",{data:function(){return{isLoadingAgreement:!0,isOpenAgreement:!1,agreement:null}},props:["options","fields","errors","isLoading","checkDepends","block_id"],mounted:function(){this.rebuildValues()},watch:{fields:function(){this.rebuildValues()}},methods:{rebuildValues:function(){_.each(this.fields,function(e){switch(e.typename){case"checkbox":e.default&&(e.value=1);break;case"country":e.typename="select",e.variants=_.sortBy(_.map(e.variants,function(e,t){return _.isObject(e)?e:{k:t,v:e}}),"v");break;case"select":e.variants=_.map(e.variants,function(e,t){return _.isObject(e)?e:{k:t,v:e}})}})},stylesheet:function(){return this.options.design&&this.options.design.on?"background:"+this.options.design.bg+";border-color:"+this.options.design.bg+";color:"+this.options.design.text:""},checkFieldDepends:function(e){return null==e.depends_name||(!this.checkDepends||(this.checkDepends(e)||null!=this.fields[e.depends_name]&&-1!=e.depends_value.indexOf(this.fields[e.depends_name].value)))},input_type:function(e){var t="text";return"number"==e.typename&&(t="number"),"email"==e.typename&&(t="email"),t},prepareParagraph:function(e){return e.text.replace(/<a /,'<a onclick="return false" ')},clickParagraph:function(e){var t=this;if(e.target&&"A"==e.target.tagName.toUpperCase()&&(this.isOpenAgreement=!0,!this.agreement)){var i=e.target.getAttribute("data-endpoint-params");i=i?JSON.parse(i):{},this.$api.get(e.target.getAttribute("data-endpoint"),{params:Object.assign(i,{request:"body"})}).then(function(e){t.agreement=e.response.body,t.isLoadingAgreement=!1})}},selectStyle:function(e){return e.value?"":"color:gray"},getFields:function(){var e=!0,t=[];for(i in this.fields){var s=this.fields[i];if(this.checkFieldDepends(s)&&-1==["paragraph","button"].indexOf(s.typename)){switch(s.typename){case"date":s.value=s.value?date_format("d.m.Y",s.value/1e3|0):"";break;case"time":s.value=s.value?date_format("H:i",s.value/1e3|0):"";break;default:null==s.value&&(s.value=""),s.value=s.value.toString().trim()}if(s.required&&!s.value){alert(this.$gettext("Необходимо заполнить поле")),e=!1;break}if("phone"==s.typename&&!s.valid&&s.value||!s.value&&s.required){alert(this.$gettext("Введите корректный номер телефона")),e=!1;break}if("email"==s.typename&&!s.valid&&s.value||!s.value&&s.required){if(!/^(([^а-я<>()[\]\\.,;:\s@\"]+(\.[^а-я<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s.value)){alert(this.$gettext("Введите корректный email")),e=!1;break}}t[i]={type:s.type_id,value:s.value,idx:null==s.idx?null:s.idx}}}return e?t:null}},template:'<div> <div v-for="(field, idx) in fields" v-if="checkFieldDepends(field)"> <div v-if="field.typename == \'button\'" class="form-field"><button type="submit" class="button btn-link" :style="stylesheet(field)" :class="{\'is-loading\': isLoading}">{{field.title}}</button></div> <div v-else-if="field.typename == \'paragraph\'" class="form-field form-field-paragraph" style="font-size:1.9em !important" v-html="prepareParagraph(field)" @click="clickParagraph"></div> <div v-else class="form-field" :class="{\'has-error\': errors && errors[idx]}"> <div v-if="field.typename == \'checkbox\'" class="checkbox-list"> <label class="checkbox"> <input type="checkbox" :checked="field.default" v-model="field.value" :required="field.required == 1" :disabled="isLoading"> {{field.title}}<sup class="required" v-if="field.required">*</sup> </label> <div class="form-field-desc" v-if="field.text">{{field.text}}</div> </div> <label v-else class="label" :for="\'fid\'+idx">{{field.title}}<sup class="required" v-if="field.required == 1">*</sup></label> <div v-if="(field.typename != \'checkbox\') && field.text" class="form-field-desc">{{field.text}}</div> <input v-if="[\'name\', \'text\', \'email\', \'number\'].indexOf(field.typename) != -1" :name="field.typename" :type="input_type(field)" :disabled="isLoading" v-model="field.value" :required="field.required == 1" :id="\'fid\'+idx"> <mx-phone v-if="field.typename == \'phone\'" :name="field.typename" v-model="field.value" :disabled="isLoading" :required="field.required == 1" :isValid.sync="field.valid" :id="\'fid\'+idx"></mx-phone> <textarea v-if="field.typename == \'textarea\'" rows="4" :disabled="isLoading" v-model="field.value" :required="field.required == 1" :id="\'fid\'+idx"></textarea> <div class="select" v-if="field.typename == \'select\'"><select v-model="field.value" :required="field.required == 1" :disabled="isLoading || field.disabled" :style="selectStyle(field)"> <option value="" v-if="field.nulltitle">{{field.nulltitle}}</option> <option value="" v-else>{{\'-- Не выбрано --\'|gettext}}</option> <option v-for="v in field.variants" :value="v.k">{{v.v}}</option> </select></div> <div v-if="field.typename == \'date\'"> <vue-frontend-components-datapicker v-model=\'field.value\' :required="field.required == 1" :disabled="isLoading || field.disabled" :id="\'fid\'+idx"></vue-frontend-components-datapicker> </div> <div v-if="field.typename == \'time\'"> <vue-frontend-components-clockpicker v-model="field.value" :disabled="isLoading || field.disabled" hour-format="24" :id="\'fid\'+idx"></vue-frontend-components-clockpicker> </div> <div class="radio-list" v-if="field.typename == \'radio\'"> <label v-for="v in field.variants" class="radio is-block"> <input type="radio" :value="v" :disabled="isLoading" v-model="field.value" :required="field.required == 1" :name="\'b{1}f{2}\'|format(block_id, idx)"> {{v}} </label> </div> <p class="help is-danger" v-if="errors && errors[idx]">{{errors[idx]}}</p> </div> </div> <mx-modal :active.sync="isOpenAgreement" :has-modal-card="true"> <div class="modal-card has-text-black" style="font-size: 1rem"> <header class="modal-card-head"><p class="modal-card-title">{{\'Юридическая информация\'|gettext}}</p> <button type="button" class="modal-close is-large" @click="isOpenAgreement = false"></button></header> <section class="modal-card-body"> <div class="border col-xs-12" v-if="isLoadingAgreement"><div class="loading-overlay loading-block is-active"><div class="loading-icon"></div></div></div> <div v-html="agreement"></div> </section> <div class="modal-card-foot"> <button type="button" class="button is-dark" @click="isOpenAgreement = false">{{\'Закрыть\'|gettext}}</button> </div> </div> </mx-modal> </div>'}),window.$app.defineComponent("frontend","vue-frontend-index",{data:function(){return{inited:!1}},methods:{reduildStyles:function(){StylesFactory.updateCSSBlock(this.$account.styles,this.$refs.styles)}},mounted:function(){this.reduildStyles(),this.inited=!0},template:'<div class="is-flex-fullheight"> <div ref=\'styles\'></div> <div v-html="$account.theme.html"></div> <router-view v-if="inited"></router-view> <vue-frontend-blocks-html :options=\'$account\' v-if="$account.html"></vue-frontend-blocks-html> <vue-frontend-actionbar></vue-frontend-actionbar> <component v-bind:is="\'vue-frontend-addons-\'+w.name" v-for="w in $account.widgets" v-model="w.data"></component> </div>'}),window.$app.defineComponent("frontend","vue-frontend-loading-blocks",{data:function(){return{products:[0,1,2,3,4]}},props:["blocks"],computed:{avatarLink:function(){return"/"+this.$account.nickname+(2==this.$account.products_avatar?"/m/":"")},avatarClassname:function(){return"profile-avatar profile-avatar-"+this.$account.avatar_size}},template:'<div> <div class="block-item has-mb-2" v-for="name in blocks"> <div class="block-item block-avatar has-mb-4" v-if="name == \'avatar\'"> <div class="has-text-centered"><div :class="avatarClassname" class="is-fetching-block"></div></div> <div class="has-text-centered text-avatar" v-if="!$account.is_avatar_hide_text"><p class="is-fetching-block">@{{$account.nickname}}</p></div> </div> <div class="block-item has-mb-2" v-if="name == \'picture\'"> <div class="block-slider-inner"> <div class="slider slider-pictures"> <div class="slider-inner"> <div class="slider-slide"><div class="picture-container picture-cover is-fetching-block" style="padding-top: 100%"><div></div></div></div> </div> </div> </div> </div> <div class="block-item has-mb-2" v-if="name == \'title\'"> <h3><p class="is-fetching-block">Product title</p></h3> </div> <div class="block-item has-mb-2" v-if="name == \'link\'"> <div class="button btn-link active block-link is-fetching-block">Link</div> </div> <div class="row row-small" v-if="name == \'products\'"> <div class="col-xs-6 col-sm-4 item" v-for="p in products"> <div class="product-container-outer"> <div class="product-container is-fetching-block"> </div> <div class="product-container-text"> <i style="width: 50%"><p class="is-fetching-block" style="display: block">Title</p></i> <b style="width: 30%"><p class="is-fetching-block" style="display: block">0.00</p></b> </div> </div> </div> </div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-market-basket",{data:function(){return{step:0,cart:null,fields:null,fields_footer:null,shipping:null,discounts:null,hasPromocodes:!1,confirm:null,button:null,isFetching:!1,contacts:{},errors:{},failed:null,isOpenPromocodeForm:!1,isCheckingPromocode:!1,promocode:"",errorPromocode:""}},mounted:function(){window.data?(this.initData(window.data),delete window.data):this.fetchData()},activated:function(){this.step=0,this.fetchData()},computed:{discountValue:function(){var e=this,t=0,a=[],o=!1;return _.each(this.discounts,function(i){if(!o)switch(i.profit){case"free_shipping":break;default:switch(i.profit_apply){case"order":var s=Math.pow(10,e.$account.currency.precision);"percentage"==i.profit?t+=_.sumBy(e.cart,function(e,t){return-1==a.indexOf(e.id)?(a.push(e.id),e.amount*function(e){return Math.round(e*s)/s}((i.apply_options?e.price:e.price_offer)/100*i.profit_value)):0}):i.profit_value&&(t=i.profit_value,o=!0);break;case"offers":var n=i.profit_offers;t+=_.sumBy(e.cart,function(e,t){return null!=n[e.id]&&-1==a.indexOf(e.id)?(a.push(e.id),e.amount*Math.max(0,(i.apply_options?e.price:e.price_offer)-n[e.id])):0})}}}),t},shippingPrice:function(){for(i in this.discounts){if("free_shipping"==this.discounts[i].profit)return 0}return this.confirm.shipping.price},avatarLink:function(){return{name:2==this.$account.products.avatar?"catalog":"index"}},avatarClassname:function(){return"profile-avatar profile-avatar-"+this.$account.avatar_size},total_compare:function(){return _.sumBy(this.cart,function(e){return(e.price_compare&&0<e.price_compare&&e.price_compare>e.price?e.price_compare:e.price)*e.amount})},total:function(){return _.sumBy(this.cart,function(e){return e.price*e.amount})},title_zones:function(){return null!=this.shipping.title_zones&&this.shipping.title_zones?this.shipping.title_zones:this.$gettext("Другие страны")},isSelfservice:function(){return""!=this.fields.shipping_method.value&&0==this.fields.shipping_method.value.indexOf("selfservice:")},userShipping:function(){return 1<this.shipping.amount_methods||1==this.shipping.amount_methods&&!this.shipping.use_zones},isAllowAction:function(){switch(this.step){case 0:return this.cart&&this.cart.length&&_.sum(this.cart,"is_active")==this.cart.length;case 1:return 0==Object.keys(this.errors).length&&null==this.failed;case 2:return!0}}},methods:{setStep:function(e){this.errors=[],this.failed=null,this.step=e},promocodeFilter:function(e){var t=e.which?e.which:e.keyCode;if(13==t)return!0;String.fromCharCode(t).toUpperCase().match(/[A-ZА-Яa-zа-я0-9\-_]/)||e.preventDefault()},promocodeFilterAfter:function(){this.promocode=this.promocode.toUpperCase().replace(/[^A-ZА-Я0-9\-_ ]/g,"").trim().replace(/ /g,"_")},openPromocodeForm:function(){var e=this;this.isOpenPromocodeForm=!0,setTimeout(function(){e.$refs.inputPromocode.focus()},600)},closePromocodeForm:function(){this.promocode=this.errorPromocode="",this.isOpenPromocodeForm=!1},applyPromocode:function(){var t=this;this.isCheckingPromocode=!0,this.$api.get("market/checkout/promocode",{params:{promocode:this.promocode}},this).then(function(e){"success"==e.result?(t.discounts=e.response.discounts,t.closePromocodeForm()):(t.errorPromocode=e.fail,t.$nextTick(function(){t.$refs.inputPromocode.focus()})),t.isCheckingPromocode=!1}).catch(function(){t.isCheckingPromocode=!1})},clearPromocode:function(){var t=this;this.$api.get("market/checkout/clearpromocode").then(function(e){"success"==e.result&&(t.discounts=e.response.discounts)})},checkFieldDepends:function(e){return null!=this.fields[e.depends_name]&&-1!=e.depends_value.indexOf(this.fields[e.depends_name].value)},fetchData:function(){var t=this;this.isFetching=!0,this.$api.get("market/checkout/basket",{}).then(function(e){"success"==e.result&&t.initData(e.response),t.isFetching=!1})},amountFilter:function(e){var t=e.which?e.which:e.keyCode;(t<48||57<t)&&e.preventDefault()},amountFilterCheck:function(e){e.amount=""===e.amount?0:parseInt(e.amount)},amountBlur:function(e,t){e.amount||this.cart.splice(t,1),this.updateCart()},amountChange:function(e,t,i){e.amount+=i,this.amountBlur(e,t)},updateCart:function(){var t=this;this.$actionbar.info.basket.products={},_.each(this.cart,function(e){t.$actionbar.info.basket.products[e.id]=e.amount}),this.$actionbar.pack(),this.updateDiscount()},updateDiscount:_.debounce(function(){var t=this;this.$api.get("market/checkout/discount",{}).then(function(e){"success"==e.result&&(t.discounts=e.response.discounts)})},500),initData:function(e){var i=this;this.cart=_.map(e.cart,function(e,t){return e.id=t,e.link={name:"product",params:{product_id:e.product_id.toString(16)}},e.style=e.picture?"background-image:url(//"+i.$account.storage_domain+"/p/"+e.picture+")":"",e.subtitles=null!=e.subtitles?e.subtitles.join(", "):"",e}),this.discounts=e.discounts,this.hasPromocodes=e.has_promocodes,window.$events.fire("setpage",this)},getFields:function(){var e=[this.$refs.fields1,this.$refs.fields2,this.$refs.fields3],t={};if(this.shipping.is_active){if(!this.userShipping&&this.shipping.use_zones&&(this.fields.shipping_method.value="zones"),this.userShipping&&!this.fields.shipping_method.value)return void alert(this.$gettext("Необходимо выбрать метод доставки"));null!=this.fields.shipping_method&&(t.shipping_method={value:this.fields.shipping_method.value})}for(var i=0;i<=2;i++)if(null!=e[i]){var s=e[i].getFields();if(!s){t=null;break}t=Object.assign(t,s)}return t},submitCheckout:function(){var t=this;this.contacts=this.getFields(),this.contacts&&(this.isFetching=!0,this.errors=[],this.failed=null,this.$api.post("market/checkout/confirm",{params:{fields:this.contacts}}).then(function(e){"success"==e.result?(t.confirm=e.response,t.button=e.response.button,t.step++):(t.errors=e.errors,t.failed=e.failed),t.isFetching=!1}))},action:function(){var i=this;switch(this.step){case 0:this.isFetching=!0,this.errors=[],this.failed=null,this.$api.get("market/checkout/checkout",{}).then(function(e){if("success"==e.result){var t=e.response;i.fields=t.fields,i.fields_footer=t.fields_footer,i.shipping=t.shipping}else i.errors=e.errors,i.failed=e.failed;i.isFetching=!1,i.step++});break;case 1:this.$refs.submit.click();break;case 2:this.isFetching=!0,this.$api.post("market/checkout/pay",{params:{fields:this.contacts}}).then(function(e){null!=e.redirect?window.top.location=e.redirect:i.isFetching=!1})}}},template:'<div class="container has-pt-3"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2"> <mx-modal :active.sync="isOpenPromocodeForm" :has-modal-card="true"> <form @submit.prevent="applyPromocode"> <div class="modal-card modal-card-little"> <header class="modal-card-head"><p class="modal-card-title">{{\'Активировать промокод\'|gettext}}</p> <button type="button" class="modal-close is-large" @click="closePromocodeForm"></button></header> <section class="modal-card-body has-text-black"> <div class="field" :class="{\'has-error\': errorPromocode}"> <input type="text" class="input is-large" maxlength="16" @keypress="promocodeFilter" @change="promocodeFilterAfter" @keyup="promocodeFilterAfter" placeholder="PROMOCODE" v-model="promocode" :disabled="isCheckingPromocode" ref="inputPromocode"> <p class="help">{{errorPromocode}}</p> </div> </section> <div class="modal-card-foot"> <button type="submit" class="button is-primary" :class="{\'is-loading\': isCheckingPromocode}">{{\'Применить\'|gettext}}</button> </div> </div> </form> </mx-modal> <vue-frontend-blocks-avatar v-if="$account.products.avatar" :to="avatarLink" class="has-mb-2"></vue-frontend-blocks-avatar> <div class="field has-addons basket-breadcrumbs has-mb-3" data-toggle="buttons"> <div class="control is-expanded" style="width: 33%"><label class="button is-fullwidth" :class="{active: step>= 0}" @click="setStep(0)"><i>{{\'Корзина\'|gettext}}</i></label></div> <div class="control is-expanded" style="width: 33%"><label class="button is-fullwidth" :class="{active: step>= 1, \'is-disabled\': step < 1}" @click="setStep(1)"><i>{{\'Контакты\'|gettext}}</i></label></div> <div class="control is-expanded" style="width: 33%"><label class="button is-fullwidth" :class="{active: step>= 2, \'is-disabled\': step < 2}"><i>{{\'Подтверждение\'|gettext}}</i></label></div> </div> <div class="message is-danger" style="font-size: 1.9em !important;" v-if="failed"> <div class="message-body">{{failed}}</div> </div> <div class="block-item has-mb-2" v-if="step == 0"> <div class="has-pt-2 has-pb-2" v-if="isFetching"> <div class="loading-overlay loading-block is-active"><div class="loading-icon"></div></div> </div> <div v-else> <div class="block-panel has-p-2 block-text" v-if="!cart || cart.length == 0"> <div class="border-vertical has-text-centered">{{\'Корзина пуста\'|gettext}}</div> </div> <div class="block-panel block-text" v-else> <div class="row row-small products-cart has-p-2" v-for="(f, k) in cart"> <div class="col-sm-1 col-xs-2 block-xs"><div class="has-text-centered" style="width:100%"><router-link :to="f.link" class="product-container-outer"><div class=\'product-container\' :class="{\'product-container-empty\': !f.picture}" :style="f.style"></div></router-link></div></div> <div class="col-sm col-xs-10 block-xs"><router-link :to="f.link">{{f.title}}</router-link><div v-if="f.subtitles" style="font-size: 70%;color: #777">{{f.subtitles}}</div></div> <div class="col-sm-3 col-xs-5"> <div class="field has-addons field-price" :class="{error: !f.is_active}"> <span class="control"><button class="button is-light btn-flat" @click="amountChange(f, k, -1)"><i class="fai fa-minus"></i></button></span> <span class="control"><input type=\'number\' class="input has-text-right skip-enter" v-model="f.amount" min="0" @keypress="amountFilter" @keyup="amountFilterCheck(f)" @blur="amountBlur(f, k)"></span> <span class="control"><button class="button is-light btn-flat" @click="amountChange(f, k, 1)"><i class="fai fa-plus"></i></button></span> </div> </div> <div class="col-sm-2 col-md-3 col-lg-2 col-xs-7 has-text-nowrap has-text-right"><div class="has-text-right" style="width:100%;font-size: 1.2rem"> <div class="has-text-grey-lighter" v-if="f.price_compare && f.price_compare> f.price" style="font-size: 70%;"><span class="strikethrough">{{f.price_compare*f.amount|currency}}</span></div> {{f.price*f.amount|currency}} </div></div> </div> <vue-frontend-market-discount @openPromocodeForm="openPromocodeForm" @clearPromocode="clearPromocode" :hasPromocodes="hasPromocodes" :discountValue="discountValue" :discounts="discounts"></vue-frontend-market-discount> <div class="row row-small products-cart has-p-2"> <div class="col-md-3 col-lg-2 col-xs-5"><div class="text-xs-left" style="width:100%;">{{\'Итого\'|gettext}}:</div></div> <div class="col-md-9 col-lg-10 col-xs-7"><div class="has-text-right has-text-nowrap" style="width:100%;"> {{total - discountValue|currency}} </div></div> </div> </div> </div> </div> <div class="block-item has-mb-2" v-if="step == 1"> <form @submit.prevent="submitCheckout" class="block-form"> <button type="submit" ref=\'submit\' style="display: none"></button> <vue-frontend-form-elements :fields="fields" v-if="fields" ref=\'fields1\' :is-loading="isFetching"></vue-frontend-form-elements> <div v-if="shipping && shipping.is_active"> <div v-if="userShipping"> <div class="form-field"> <label class="label">{{\'Доставка\'|gettext}}<sup class="required">*</sup></label> <div class="radio-list"> <label class="radio is-block" v-if="shipping.use_selfservice" v-for="(c, i) in shipping.shipping"> <input type="radio" name="dvField" :value="\'selfservice:{1}\'|format(i)" v-model="fields.shipping_method.value" required=\'on\' :disabled="isFetching"> {{\'Самовывоз\'|gettext}} <span v-if="c.full" style="opacity: .5;padding-left: 8px">({{c.full}})</span> </label> <label class="radio is-block" v-if="method.on" v-for="method in shipping.custom"> <input type="radio" name="dvField" :value="method.value" v-model="fields.shipping_method.value" required=\'on\' :disabled="isFetching"> {{method.title}} <span style="opacity: .5;padding-left: 8px">({{method.price|currency}})</span> </label> <label class="radio is-block" v-if="shipping.use_zones"> <input type="radio" name="dvField" value="zones" v-model="fields.shipping_method.value" required=\'on\' :disabled="isFetching"> {{title_zones}} </label> </div> </div> </div> <vue-frontend-form-elements ref=\'fields2\' :errors="errors" :fields="shipping.fields" :checkDepends="checkFieldDepends" :is-loading="isFetching" v-if="!isSelfservice && fields.shipping_method.value"></vue-frontend-form-elements> </div> <vue-frontend-form-elements ref=\'fields3\' :fields="fields_footer" v-if="fields_footer" :is-loading="isFetching"></vue-frontend-form-elements> </form> </div> <div class="block-item has-mb-2" v-if="step == 2"> <div class="block-panel block-text"> <div class="row row-small products-cart has-p-2" v-for="(f, k) in cart"> <div class="col-sm-1 col-xs-2 block-xs"><div class="has-text-centered" style="width:100%"><router-link :to="f.link" class="product-container-outer"><div class=\'product-container\' :class="{\'product-container-empty\': !f.picture}" :style="f.style"></div></router-link></div></div> <div class="col-sm col-xs-10 block-xs"><router-link :to="f.link">{{f.title}}</router-link><div v-if="f.subtitles" style="font-size: 70%;color: #777">{{f.subtitles}}</div></div> <div class="col-sm-2 col-xs-5"> {{f.amount|number}} {{\'шт.\'|gettext}} </div> <div class="col-sm-3 col-md-3 col-lg-2 col-xs-7 has-text-nowrap has-text-right"><div class="has-text-right" style="width:100%;font-size: 1.2rem"> {{f.price*f.amount|currency}} </div></div> </div> <div class="row row-small products-cart has-p-2"> <div class="col-sm-1 col-xs-2" style="line-height: 0"><div class="product-container fa fai fa-user"></div></div> <div class="col-sm col-xs-10">{{\'Контакты\'|gettext}}<div style="font-size: 70%;color: #777">{{confirm.contacts}}</div></div> </div> <div class="row row-small products-cart has-p-2" v-if="confirm.shipping.is_active"> <div class="col-sm-1 col-xs-2" style="line-height: 0"><div class="product-container fa fai fa-truck"></div></div> <div class="col-sm col-xs-6">{{\'Доставка\'|gettext}}<div style="font-size: 70%;color: #777">{{confirm.shipping.details}}</div></div> <div class="col-sm-3 col-xs-4 has-text-nowrap has-text-right"> {{shippingPrice|currency}} </div> </div> <vue-frontend-market-discount @openPromocodeForm="openPromocodeForm" @clearPromocode="clearPromocode" :hasPromocodes="hasPromocodes" :discountValue="discountValue" :discounts="discounts"></vue-frontend-market-discount> <div class="row products-cart has-p-2" style="border-top: 1px solid #eee"> <div class="col-md-3 col-lg-2 col-xs-5"><div class="text-xs-left" style="width:100%;">{{\'Итого\'|gettext}}:</div></div> <div class="col-md-9 col-lg-10 col-xs-7"><div class="has-text-right has-text-nowrap" style="width:100%;"> {{total+shippingPrice-discountValue|currency}} </div></div> </div> </div> </div> </div> </div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-market-catalog",{data:function(){return{next:0,fields:[],collections:[],isFetching:!1,isFlowFetching:!1,bottom:!1,filters:{query:""}}},mounted:function(){var e=this;window.data?(this.clearData(),this.initData(window.data),delete window.data,this.$nextTick(function(){e.bottomVisible()&&e.next&&e.fetchData(!1,!0)}),this.checkGUI()):this.fetchData(!0),window.addEventListener("scroll",function(){e.bottom=e.bottomVisible()})},props:["username","collection_id"],computed:{avatarLink:function(){return{name:2==this.$account.products.avatar?"catalog":"index"}},avatarClassname:function(){return"profile-avatar profile-avatar-"+this.$account.avatar_size}},watch:{bottom:function(e){e&&!this.isFlowFetching&&this.next&&this.fetchData(!1,!0)},collection_id:function(){this.clearData(),this.fetchData()}},methods:{collectionLink:function(e){return"*"==e||null==e?{name:"catalog"}:{name:"collection",params:{collection_id:e}}},bottomVisible:function(){var e=window.scrollY,t=document.documentElement.clientHeight;return document.documentElement.scrollHeight<t+e+200&&e},onFilter:_.debounce(function(){this.clearData(),this.fetchData()},700),prepareFields:function(e){var t=this;return this.next=e.length?e[e.length-1].column_id:0,_.map(e,function(e){return e.classname="product-container "+(e.picture?"picture-"+t.$account.products.pictures_placement:"product-container-empty"),e.stylesheet=e.picture?"background-image:url(//"+t.$account.storage_domain+"/p/"+e.picture+");background-color: "+t.$account.products.pictures_background:"",e})},clearData:function(){this.fields=[],this.next=0},initData:function(e){var t=this.prepareFields(e.fields);this.fields=this.fields.concat(t),e.collections.unshift({collection_id:"*",collection:this.$gettext("Все товары")}),this.collections=e.collections},fetchData:function(t,e){var i=this;e?this.isFlowFetching=!0:this.isFetching=!0,this.filters.query&&null!=window.fbq&&fbq("track","Search",{search_string:this.filters.query}),this.$api.get("market/products/list",{params:{collection_id:this.collection_id?parseInt(this.collection_id,16):null,next:this.next,filters:this.filters}}).then(function(e){i.initData(e.response),i.isFetching=!1,i.isFlowFetching=!1,i.$nextTick(function(){i.bottomVisible()&&i.next&&i.fetchData(!1,!0),t&&i.checkGUI()})})},checkGUI:function(){var s=this;this.$nextTick(function(){if(null!=s.$refs.collections&&"row"==s.$account.products.collections_view){var e=s.$refs.collections.querySelector(".in"),t=e.offsetLeft,i=s.$refs.scroll.width;s.$refs.scroll.scrollTo(t-i/2+e.offsetWidth/2,0)}})}},template:'<div class="container has-pt-3"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1"> <vue-frontend-blocks-avatar v-if="$account.products.avatar" :to=\'avatarLink\' class="has-mb-2"></vue-frontend-blocks-avatar> <div class="block-form form-field" v-if="$account.products.show_search"> <input type="search" inputmode="search" :placeholder="\'Поиск по названию\'|gettext" v-model="filters.query" @input="onFilter"> </div> <div v-if="$account.products.show_filter && (collections.length> 1)"> <div class="block-form form-field" v-if="$account.products.collections_view == \'dropdown\'"> <div class="select is-fullwidth"> <select v-model="collection_id" @change="router.push(collectionLink(collection_id))"> <option :value="undefined">-- {{\'Все товары\'|gettext}} --</option> <option v-for="c in collections" :value="c.collection_id" v-if="c.collection_id != \'*\'">{{c.collection}}</option> </select> </div> </div> <vue-frontend-vbar v-if="$account.products.collections_view == \'row\'" class="collection-bar has-mb-2" ref=\'scroll\' shadow="horizontal" :shadow-color="$account.theme.bg.color1"> <div class="collection-list" ref=\'collections\'> <router-link :to="collectionLink(c.collection_id)" v-for="c in collections" class="collection-item button" :class="{in: c.collection_id == collection_id || ((c.collection_id == \'*\') && !collection_id)}">{{c.collection}}</router-link> </div> </vue-frontend-vbar> </div> <vue-frontend-loading-blocks :blocks="[\'products\']" v-if="isFetching"></vue-frontend-loading-blocks> <div class="row row-small" ref="products"> <div v-for="f in fields" class="col-xs-6 col-sm-4 item"> <router-link :to="{name: \'product\', params: {product_id: f.product_id.toString(16)}}" class="product-container-outer"> <div :class=\'f.classname\' :style="f.stylesheet"> <dl v-if="$account.products.show_snippet_overlay && ($account.products.show_snippet_title || $account.products.show_snippet_price)"> <dt v-if="$account.products.show_snippet_title">{{f.title}}</dt> <dt v-else></dt> <dd v-if="$account.products.show_snippet_price"><span v-if="$account.products.show_snippet_compare_price && f.price_compare" class="strikethrough" style="font-size: 70%;opacity: .4">&nbsp;{{f.price_compare|currency}}&nbsp;</span> {{f.price|currency}}</dd> </dl> </div> <div v-if="!$account.products.show_snippet_overlay && ($account.products.show_snippet_title || $account.products.show_snippet_price)" class="product-container-text"><i v-if="$account.products.show_snippet_title">{{f.title}}</i><b v-if="$account.products.show_snippet_price">{{f.price|currency}} <span v-if="$account.products.show_snippet_compare_price && f.price_compare" class="is-price strikethrough" style="font-size: 70%;opacity: .5">&nbsp;{{f.price_compare|currency}}&nbsp;</span></b></div> </router-link> </div> </div> <div class="block-item has-mb-2" v-if="!fields.length && !this.isFetching"> <div class="block-field has-text-centered has-mt-2" style="font-size:2.2em !important;opacity: .5"> {{\'В магазине пока отсутствуют товары\'|gettext}} </div> </div> <div class="border col-xs-12" v-if="isFlowFetching"><div class="loading-overlay loading-block is-active"><div class="loading-icon"></div></div></div> </div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-market-discount",{props:["hasPromocodes","discountValue","discounts"],computed:{promocode:function(){var e=null;for(i in this.discounts){var t=this.discounts[i];if(t.promocode){e=t.promocode;break}}return e}},template:'<transition name="fade"> <div class="row row-small products-cart has-p-2" v-if="hasPromocodes || discountValue"> <div class="col-sm-1 col-xs-2" style="line-height: 0"><div class="product-container fa fai fa-badge-percent"></div></div> <div class="col-sm col-xs-6"> <span v-if="discountValue && !promocode">{{\'Скидка\'|gettext}}</span> <span v-else>{{\'Промокод\'|gettext}}</span> <div style="font-size: 70%;color: #777" v-if="hasPromocodes"> <div class="tags has-addons" v-if="promocode"><span class="tag">{{promocode}}</span><a role="button"tabindex="0" class="tag is-delete" @click="$emit(\'clearPromocode\')"></a></div> <a v-else style="text-decoration: underline;color: #7a7a7a !important" @click="$emit(\'openPromocodeForm\')">{{\'Активировать промокод\'|gettext}}</a> </div> </div> <div class="col-sm-3 col-xs-4 has-text-nowrap has-text-right"> <transition name="fade"> <span v-if="discountValue">-&nbsp;{{discountValue|currency}}</span> </transition> </div> </div> </transition>'}),window.$app.defineComponent("frontend","vue-frontend-market-product",{data:function(){return{blocks:[],product:[],variants:[],variants_offers:[],variants_value:"",options_selected:[],options:[],min_price:0,max_price:0,offers_checked:{},isFetching:!1}},props:["product_id"],mounted:function(){window.data?(this.initData(window.data),delete window.data):this.fetchData()},activated:function(){this.clearForm(),window.$events.fire("setpage",this)},computed:{avatarLink:function(){return{name:2==this.$account.products.avatar?"catalog":"index"}},avatarClassname:function(){return"profile-avatar profile-avatar-"+this.$account.avatar_size},price_html:function(){return 0==this.variants_offers.length?this.$currency(this.product.price):null!=this.variants_offers[this.variants_value]?this.$currency(this.variants_offers[this.variants_value].price):(this.min_price==this.max_price?"":this.$currency(this.min_price)+'<span style="opacity:.5;" class="is-text">&nbsp;—&nbsp;</span>')+this.$currency(this.max_price)},price:function(){return 0==this.variants_offers.length?this.product.price:null!=this.variants_offers[this.variants_value]?this.variants_offers[this.variants_value].price:this.min_price==this.max_price?this.max_price:null},price_compare:function(){return this.product.price_compare?0==this.variants_offers.length?this.product.price_compare>this.product.price?this.product.price_compare:null:null!=this.variants_offers[this.variants_value]?this.variants_offers[this.variants_value].price<this.product.price_compare?this.product.price_compare:null:this.product.price_compare:null},offer_id:function(){return 0==this.variants_offers.length?this.product.offer_id:null!=this.variants_offers[this.variants_value]?this.variants_offers[this.variants_value].offer_id:0}},watch:{product_id:function(){this.fetchData()}},methods:{prepareHTML:function(e){var t=e?e.toString().replace(/(\s)([a-zA-Zа-яА-Я0-9\.\-\_\-]+@[0-9A-Za-z][0-9A-Za-zА-Яа-я\-\.]*\.[A-Za-zА-Яа-я]*)/g,'$1<a href="mailto:$2" target="_blank" class="link">$2</a>').replace(/(\s)(http|https|ftp|ftps|tel)\:\/\/([а-яА-Яa-zA-Z0-9\-\.]+\.[а-яА-Яa-zA-Z]{2,})(\/[^\s"']*)?/g,'$1<a href="$2://$3$4" target="_blank" class="link">$2://$3$4</a>'):"";return this.$nl2br(t)},clearForm:function(){_.each(this.variants,function(e){e.value=""}),this.options_selected=[]},urlPicture:function(e){return"background-image:url(//"+this.$account.storage_domain+"/p/"+e+";background-color: "+this.product.products_pictures_background+";padding-top:100%"},fetchData:function(){var t=this;this.isFetching=!0,this.$api.get("market/products/get",{params:{product_id:parseInt(this.product_id,16)}}).then(function(e){"success"==e.result&&t.initData(e.response),t.isFetching=!1})},changeVariant:function(){var l=this;this.variants_value=_.map(this.variants,function(e){return e.variant_id+":"+e.value}).join(":"),this.offers_checked={},_.each(this.variants,function(t,e){var s=[];for(i in _.each(l.variants,function(e){e.variant_id==t.variant_id?s.push(e.variant_id+":[0-9]+"):s.push(e.variant_id+":"+(""!==e.value?e.value:"[0-9]+"))}),s=new RegExp(s.join(":"),"i"),l.variants_offers)if(s.test(i)){var n=i.split(":");for(j=0;j<n.length;j++){var a=parseInt(n[j]),o=parseInt(n[j+1]);t.variant_id==n[j]&&(null==l.offers_checked[a]&&(l.offers_checked[a]=[]),-1==l.offers_checked[a].indexOf(o)&&l.offers_checked[a].push(o)),j++}}})},initData:function(e){var s=this;this.blocks=e.blocks,this.product=e.product,this.variants=e.variants,this.variants_offers=e.variants_offers,this.options=e.options,this.offers_checked={},this.options_selected=[],this.variants_value="",this.min_price=Number.MAX_SAFE_INTEGER,this.max_price=0;var n={};_.each(this.variants_offers,function(e){s.min_price=Math.min(s.min_price,e.price),s.max_price=Math.max(s.max_price,e.price);var t=e.variants.split(":");for(i=0;i<t.length;i+=2)null==n[t[i]]&&(n[t[i]]={}),n[t[i]][parseInt(t[i+1])]=!0}),_.each(this.variants,function(i){s.$set(i,"value","");i.variant_values=_.filter(_.map(i.variant_values,function(e,t){return(""==e||null!=n[i.variant_id][t])&&{k:parseInt(t),v:e}}))}),window.$events.fire("setpage",this);var t=null!=this.price?this.price:this.min_price,a=[{id:parseInt(this.product_id,16),quantity:1,item_price:t}];window.$events.fire("viewProduct",{value:t,currency:this.$account.currency.code,content_type:"product",contents:a}),this.changeVariant()},setVariant:function(e,t){e.value=e.value===t.k?"":t.k,this.changeVariant()}},template:'<div class="container has-pt-3"> <div class="row has-mb-2"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2"> <vue-frontend-loading-blocks :blocks="[\'avatar\', \'picture\', \'title\']" v-if="isFetching"></vue-frontend-loading-blocks> <div class="block-item has-mb-2" v-for="block in blocks" v-else> <vue-frontend-blocks-avatar v-if="$account.products.avatar && block== \'avatar\'" :to="avatarLink" class="has-mb-2"></vue-frontend-blocks-avatar> <div class="block-slider" v-if="block == \'media\'"> <div style="margin:0 -1rem;-webkit-transform-style: preserve-3d" v-if="product.pictures.length"> <div class="slider slider-pictures is-clipped" data-allow-zoom="true"> <div class="slider-inner"> <div class="slider-slide" v-for="(f, i) in product.pictures" :class="{active: i== i}"><div :class="\'picture-container product-container picture-{1}\'|format(product.products_pictures_placement)" :style="urlPicture(f)"><div></div></div></div> </div> <div class="slider-nav" :class="{\'is-hidden\': product.pictures.length == 1}"> <div class="slider-dot" :class="{active: i== 0}" v-for="(f, i) in product.pictures"></div> </div> </div> </div> </div> <h2 v-if="block == \'title\'" class="has-mb-1">{{product.title}}</h2> <h4 v-if="block == \'title\'" class="has-mb-2"> <span class="is-price" v-html="price_html"></span> <s class="has-ml-1" style="font-size: 70%;opacity:.5" v-if="price_compare && (price < price_compare)">&nbsp;{{price_compare|currency}}&nbsp;</s> </h4> <div class="block-text has-mb-4" v-if="block == \'description\'" v-html="prepareHTML(product.description)"></div> <div v-if="block == \'offers\'"> <div class="block-form"> <div class="form-field" v-for="f in variants"> <label class="label has-text-weight-semibold">{{f.variant_title}}</label> <component v-bind:is="($account.products.variants_view == \'row\')?\'vue-frontend-vbar\':\'div\'" class="has-mb-2 collection-bar" :class="{\'is-multiline\': $account.products.variants_view == \'tags\'}" ref=\'scroll\' shadow="horizontal" :shadow-color="$account.theme.bg.color1" v-if="$account.products.variants_view != \'dropdown\'"> <div class="collection-list"> <a class="button" v-for="v in f.variant_values" @click="setVariant(f, v)" :class="{in: v.k === f.value, disabled: (offers_checked[f.variant_id] == undefined || offers_checked[f.variant_id].indexOf(v.k) == -1)}">{{v.v}}</a> </div> </component> <div class="select" v-if="$account.products.variants_view == \'dropdown\'"><select @change="changeVariant" v-model="f.value" :class="{\'has-text-grey\': f.value === \'\'}"><option value="">{{\'-- Не выбрано --\'|gettext}}</option> <option :value="v.k" v-for="v in f.variant_values" :disabled="(offers_checked[f.variant_id] == undefined || offers_checked[f.variant_id].indexOf(v.k) == -1)">{{v.v}}</option> </select></div> </div> <div v-if="options"> <div class="block-text has-mb-2" v-if="product.products_description_before_options" v-html="prepareHTML(product.products_description_before_options)"></div> <div class="form-field"> <div class="checkbox-list" id=\'productOptions\' v-for="options"> <label class="is-block checkbox" v-for="(f, option_id) in options"> <input type="checkbox" :value="option_id" v-model="options_selected"> {{f.title}} <span style="opacity:.5">(<span v-if="f.price> 0">+</span>{{f.price|currency}})</span> </label> </div> </div> </div> </div> </div> </div> </div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-page",{data:function(){return{showBlockedMessage:!1,isWizard:!1,wizzardClasses:"",fields:[],isFetching:!1}},props:["page_id"],created:function(){window.data?(this.fields=window.data.fields,this.isWizard=null!=window.data.is_wizard&&window.data.is_wizard,null!=window.data.stat&&$events.fire("hit",{hash:window.data.stat,tz:this.$account.utc_timezone}),delete window.data):this.fetchData()},mounted:function(){this.prepareStyles()},watch:{page_id:function(){this.fields=[],this.fetchData()}},computed:{foundBlocked:function(){for(var e=0;e<this.fields.length;e++)for(var t=0;t<this.fields[e].items.length;t++)if(!this.$auth.isAllowTariff(this.fields[e].items[t].tariff))return!0;return!1}},methods:{sectionBg:function(e,t){var i=1<arguments.length&&void 0!==t?t:"html";return e.bg?buildStylesBackground(e,i):null},prepareStyles:function(){var t={};_.each(this.fields,function(e){_.each(e.items,function(e){null!=e.options&&StylesFactory.prepareStyles(e.block_id,e.block_type_name,e.options,t)})}),StylesFactory.updateCSSBlock(t,this.$refs.styles)},wizardClick:function(){var e=this;this.isWizard&&(this.wizzardClasses="shake animated",setTimeout(function(){e.wizzardClasses=""},1e3))},checkTariff:function(e){this.$auth.isAllowTariff(e)||(this.showBlockedMessage=!0)},fetchData:function(){var t=this,i=setTimeout(function(){t.isFetching=!0},350);this.$api.get("page/get",{params:{page_id:this.page_id?parseInt(this.page_id,16):null}}).then(function(e){clearTimeout(i),null!=e.redirect?t.$router.replace(e.redirect):(t.fields=e.response.fields,window.hasAvatar=!1,_.each(t.fields,function(e){_.each(e.items,function(e){window.hasAvatar|="avatar"==e.block_type_name})}),t.prepareStyles(),$events.fire("hit",{hash:e.response.stat,tz:t.$account.utc_timezone})),t.isFetching=!1})},loadEntry:function(e){return e="vue-frontend-blocks-"+e,window.$app.loadComponent(e),e}},template:'<div class="is-flex-fullheight"> <div ref=\'styles\'></div> <a class="header-banner lock-footer has-background-black" v-if="!$account.has_nickname && $account.allow_by_session && !$account.allow_by_token" style="position: inherit" target="_blank" :href="\'https://\'+this.$account.domain+\'/profile/pages/#publish\'"> <div class="container has-mb-2 has-mt-2 is-text-centered" style="justify-content: center">{{\'Страница недоступна для просмотра всем. Для решения этой проблемы вам необходимо подключить профиль или доменное имя\'|gettext}}</div> </a> <div class="header-banner header-banner-button header-banner-static has-background-black" style="visibility: hidden" v-if="isWizard"> <div class="container has-mb-2 has-mt-2"> <div>{{\'На основе описания вашего профиля мы подготовили пример страницы\'|gettext}}</div> <button class="button is-clear">{{\'Редактировать страницу\'|gettext}}</button> </div> </div> <div class="header-banner header-banner-button has-background-black" v-if="isWizard"> <div class="container has-mb-2 has-mt-2"> <div>{{\'На основе описания вашего профиля мы подготовили пример страницы\'|gettext}}</div> <a class="button is-clear" href="/login/instagram/" rel="noopener" :class="wizzardClasses">{{\'Редактировать страницу\'|gettext}}</a> </div> </div> <div class="is-flex-fullheight" :class="{\'wizard-container-example\': isWizard}" @click="wizardClick"> <div class="container block-item has-pb-1 has-pt-3" style="max-width: 1080px" v-if="isFetching"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2"> <vue-frontend-loading-blocks :blocks="[\'avatar\', \'link\', \'link\', \'link\']"></vue-frontend-loading-blocks> </div> </div> </div> <div class="is-flex-fullheight" v-else> <div class="container has-mt-3" v-if="$account.lock_message"> <div class="message is-danger block-text has-text-centered"><div class="message-body">{{$account.lock_message}}</div></div> </div> <div v-for="(p, j) in fields" :style="sectionBg(p)"> <div class="has-pb-2 has-pt-2" :style="sectionBg(p, \'body\')"> <main> <div class="container block-item has-pb-1 has-pt-1" style="max-width: 1080px" v-for="(f, i) in p.items" :key="i" :class="{\'block-item-locked\': !$auth.isAllowTariff(f.tariff)}" :style="{\'-webkit-transform-style\': (f.block_type_name == \'pictures\')?\'preserve-3d\':\'\'}" @click="checkTariff(f.tariff)"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2" :class="\'b-\'+f.block_id"> <component v-bind:is="loadEntry(f.block_type_name)" :options="f.options" :block_id="f.block_id" :block="f" :index="i" :page_id="page_id" :class="\'block-{1}\'|format(f.block_type_name)"></component> </div> </div> </div> </main> <vue-frontend-brandlink v-if="j == fields.length - 1"></vue-frontend-brandlink> </div> </div> </div> </div> <div class="footer-banner lock-footer has-background-black has-close" :class="{\'is-closed\': !showBlockedMessage}" @click="showBlockedMessage = false" v-if="foundBlocked"> <div class="container has-mb-2 has-mt-2">{{\'К сожалению эта функция была заблокирована, так как владелец страницы своевременно не оплатил ее. Если вас не затруднит, сообщите владельцу страницы о данной проблеме\'|gettext}}</div> </div> </div>'}),window.$app.defineComponent("frontend","vue-frontend-vbar",{data:function(){return{dragging:{enable:!1,axis:"",offset:""},bars:{horizontal:{elm:"",parent:"",size:0},vertical:{elm:"",parent:"",size:0}},wrapperObj:{elm:"",scrollHeight:"",scrollWidth:"",scrollLeft:"",scrollTop:""},container:{elm:"",scrollHeight:"",scrollWidth:""}}},mounted:function(){addResizeListener(this.$refs.container,this.resize),addResizeListener(this.$refs.wrapperRef.children[0],this.resize),document.addEventListener("mousemove",this.onDrag),document.addEventListener("touchmove",this.onDrag),document.addEventListener("mouseup",this.stopDrag),document.addEventListener("touchend",this.stopDrag),this.getSizes()},beforeDestroy:function(){removeResizeListener(this.$refs.container,this.resize),removeResizeListener(this.$refs.wrapperRef.children[0],this.resize),document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("touchmove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag),document.removeEventListener("touchend",this.stopDrag)},computed:{propWrapperSize:function(){return this.wrapper?this.wrapper:""},propBarVertical:function(){return this.vBar?this.vBar:""},propBarInternalVertical:function(){return this.vBarInternal?this.vBarInternal:""},propBarHorizontal:function(){return this.hBar?this.hBar:""},propBarInternalHorizontal:function(){return this.hBarInternal?this.hBarInternal:""},barSizeVertical:function(){if(this.bars.horizontal.size&&this.bars.vertical.size)return{height:"calc(100% - 16px)"}},barSizeHorizontal:function(){if(this.bars.horizontal.size&&this.bars.vertical.size)return{width:"calc(100% - 16px)"}},barInternalVertical:function(){var e=this.getBarInternal("Y");return{height:this.bars.vertical.size+"px",top:e+"px"}},barInternalHorizontal:function(){var e=this.getBarInternal("X");return{width:this.bars.horizontal.size+"px",left:e+"px"}},validationScrolls:function(){return this.bars.horizontal.size?this.bars.vertical.size?void 0:"overflowY: hidden":"overflowX: hidden"},width:function(){return this.$refs.wrapperRef.getBoundingClientRect().width}},methods:{shadowStyle:function(e){return"background: linear-gradient(to "+("start"==e?"right":"left")+", "+this.shadowColor+" 0%, "+this.shadowColor+"00 100%)"},scroll:function(){this.getSizes(0,0)},resize:function(){this.getSizes()},getBarInternal:function(e){var t=void 0,i=void 0,s=void 0,n=void 0,a=void 0;return a=this.bars.horizontal.size&&this.bars.vertical.size?40:0,"X"===e?(t=this.wrapperObj.scrollLeft,i=this.wrapperObj.scrollWidth,s=this.bars.horizontal.size+a,n=this.container.scrollWidth):"Y"===e&&(t=this.wrapperObj.scrollTop,i=this.wrapperObj.scrollHeight,s=this.bars.vertical.size+a,n=this.container.scrollHeight),t/(i-n)*(n-s)},getCoordinates:function(e,t){var i=void 0,s=void 0,n=void 0,a=void 0,o=void 0;return"X"===t?(i=this.wrapperObj.scrollWidth,s=this.bars.horizontal.size,n=this.container.scrollWidth,a=this.container.elm.offsetLeft,o=e.clientX-this.dragging.offset):"Y"===t&&(i=this.wrapperObj.scrollHeight,s=this.bars.vertical.size,n=this.container.scrollHeight,a=this.container.elm.offsetTop-1.4*this.bars.vertical.size,o=e.clientY-this.dragging.offset),(i-n)*(o-a)/(n-s)},startDrag:function(e){e.preventDefault(),e.stopPropagation();var t,i=(e=e.changedTouches?e.changedTouches[0]:e).target.getAttribute("data-axis"),s=e.target.getAttribute("data-drag-source"),n=void 0;"Y"===i?"bar"===s?n=e.explicitOriginalTarget.offsetTop+1.4*this.bars.vertical.size:"internal"===s&&(n=e.clientY-this.bars.vertical.elm.offsetTop):"X"===i&&("bar"===s?n=e.explicitOriginalTarget.offsetLeft+1.4*this.bars.horizontal.size:"internal"===s&&(n=e.clientX-this.bars.horizontal.elm.offsetLeft)),t=n,this.dragging={enable:!0,axis:i,offset:t}},scrollTo:function(e,t){var i=this.$refs.wrapperRef;i.scrollLeft=e,i.scrollTop=t,this.getSizes()},onDrag:function(e){if(this.dragging.enable){e.preventDefault(),e.stopPropagation(),e=e.changedTouches?e.changedTouches[0]:e;var t=this.$refs.wrapperRef;"X"===this.dragging.axis?t.scrollLeft=this.getCoordinates(e,"X"):"Y"===this.dragging.axis&&(t.scrollTop=this.getCoordinates(e,"Y")),this.getSizes()}},stopDrag:function(){this.dragging.enable&&(this.dragging={enable:!1,axis:""})},getSizes:function(){var e=this.$refs.wrapperRef,t=this.$refs.container,i=this.$refs.verticalBar,s=this.$refs.verticalInternalBar,n=this.$refs.horizontalBar,a=this.$refs.horizontalInternalBar;this.wrapperObj={elm:e,scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop},this.container={elm:t,scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth},this.bars.horizontal.elm=a,this.bars.horizontal.parent=n,this.bars.horizontal.size=24<this.wrapperObj.scrollWidth-this.container.scrollWidth&&this.wrapperObj.scrollWidth-this.container.scrollWidth!=0?this.container.scrollWidth/this.wrapperObj.scrollWidth*this.container.scrollWidth:0,this.bars.vertical.elm=s,this.bars.vertical.parent=i,this.bars.vertical.size=24<this.wrapperObj.scrollHeight-this.container.scrollHeight&&this.wrapperObj.scrollHeight-this.container.scrollHeight!=0?this.container.scrollHeight/this.wrapperObj.scrollHeight*this.container.scrollHeight:0}},props:["wrapper","vBar","vBarInternal","hBar","hBarInternal","shadow","shadowColor"],template:'<div id="vbar" :class="propWrapperSize"> <div class="bar--container" ref="container" @wheel="scroll" @touchmove="scroll"> <div class="bar--shadow bar--shadow-start" :style="shadowStyle(\'start\')" :data-axis="shadow" v-show="wrapperObj.scrollLeft> 0"></div> <div class="bar--shadow bar--shadow-end" :style="shadowStyle(\'end\')" :data-axis="shadow" v-show="wrapperObj.scrollLeft + container.scrollWidth < wrapperObj.scrollWidth - 15"></div> <div class="bar--vertical" ref="verticalBar" v-show="bars.vertical.size" :style="barSizeVertical" :class="propBarVertical" @touchstart="startDrag" @mousedown="startDrag" data-axis="Y" data-drag-source="bar"> <div class="bar--vertical-internal" ref="verticalInternalBar" :style="barInternalVertical" :class="propBarInternalVertical" @touchstart="startDrag" @mousedown="startDrag" data-axis="Y" data-drag-source="internal"></div> </div> <div class="bar--horizontal" ref="horizontalBar" v-show="bars.horizontal.size" :style="barSizeHorizontal" :class="propBarHorizontal" @touchstart="startDrag" @mousedown="startDrag" data-axis="X" data-drag-source="bar"> <div class="bar--horizontal-internal" ref="horizontalInternalBar" :style="barInternalHorizontal" :class="propBarInternalHorizontal" @touchstart="startDrag" @mousedown="startDrag" data-axis="X" data-drag-source="internal"></div> </div> <div class="bar--wrapper" ref="wrapperRef" :style="validationScrolls"> <slot></slot> </div> </div> </div>'}),window.$app.defineModule("frontend",[{path:"/",props:!0,component:"vue-frontend-index",children:[{path:"/:username",props:!0,name:"index",component:"vue-frontend-page"},{path:"/:lang/wizard/:username/",props:!0,component:"vue-frontend-page"},{path:"/:username/",props:!0,name:"inner",component:{template:"<keep-alive><router-view></router-view><.keep-alive>"},children:[{path:"p/:page_id/",component:"vue-frontend-page",props:!0,name:"page"},{path:"m/",component:"vue-frontend-market-catalog",props:!0,name:"catalog"},{path:"m/:collection_id/",component:"vue-frontend-market-catalog",props:!0,name:"collection"},{path:"o/:product_id/",component:"vue-frontend-market-product",props:!0,name:"product"},{path:"b/",component:"vue-frontend-market-basket",props:!0,name:"basket"}]}]}]);
